{"version":3,"file":"bundle.js","sources":["../../src/Zip/ZipEnum.ts","../../src/Zip/AssetManifest.ts","../../src/Zip/LayaExtends/LayaExtends_Loader.ts","../../src/HttpRequestRange/FileBlock.ts","../../src/HttpRequestRange/HttpRequestRangePool.ts","../../src/HttpRequestRange/HttpRequestHeadPool.ts","../../src/HttpRequestRange/HRHead.ts","../../src/HttpRequestRange/HRRange.ts","../../src/HttpRequestRange/FileTask.ts","../../src/Zip/JsZipAsync.ts","../../src/Zip/AsyncUtil.ts","../../src/Zip/LayaExtends/LayaExtends_LoaderManager.ts","../../src/Zip/LayaExtends/LayaExtends_Resouces.ts","../../src/Zip/WaitCallbackList.ts","../../src/Zip/ZipManager.ts","../../src/DebugResources/DebugLoader.ts","../../src/DebugResources/DebugLoaderManager.ts","../../src/DebugResources/DebugLaya3D.ts","../../src/DebugResources/DebugResources.ts","../../src/Zip/PreloadZipList.ts","../../src/Zip/PreloadAssetList.ts","../../src/Zip/PrefablManager.ts","../../src/LibMain.ts"],"sourcesContent":["export enum EnumZipAssetDataType\r\n{\r\n    base64 = \"base64\",\r\n    string = \"string\",\r\n    arraybuffer = \"arraybuffer\",\r\n}\r\n","import {EnumZipAssetDataType } from \"./ZipEnum\";\r\n\r\ntype AssetIdOrName = string | number;\r\n\r\n/** 资源清单 */\r\nexport default class AssetManifest\r\n{\r\n    /** 资源列表 */\r\n    assetId2Name:DictionaryObject<number, string> | any = {};\r\n    /** zip列表 */\r\n    zipId2Name:DictionaryObject<number, string> | any = {};\r\n    /** Zip资源列表 */\r\n    zipAssets: DictionaryObject<number, number[]> | any = {};\r\n    /** 资源依赖列表 */\r\n    assetsDependencie: DictionaryObject<number, number[]> | any= {};\r\n    /** 预设依赖列表 */\r\n    prefabDependencie: DictionaryObject<number, number[]> | any= {};\r\n\r\n\r\n    srcRootPath: string = \"\";\r\n    zipRootPath: string = \"\";\r\n    zipExt:string = \".zip\";\r\n\r\n\r\n    protected assetName2Id:DictionaryObject<string, number> | any = {};\r\n    protected assetId2ZipId:DictionaryObject<number, number> | any = {};\r\n    \r\n    protected assetId2DependencieZipNames:DictionaryObject<number, string[]> | any = {};\r\n    protected assetName2DependencieZipNames:DictionaryObject<string, string[]> | any = {};\r\n\r\n    protected assetId2DependencieZipPaths:DictionaryObject<number, string[]> | any = {};\r\n    protected assetName2DependencieZipPaths:DictionaryObject<string, string[]> | any = {};\r\n\r\n    \r\n    protected assetName2DependencieAssetNames:DictionaryObject<string, string[]> | any = {};\r\n    protected assetName2DependencieAssetPaths:DictionaryObject<string, string[]> | any = {};\r\n    protected zipName2DependencieAssetNames:DictionaryObject<string, string[]> | any = {};\r\n\r\n    SetJson(json:any)\r\n    {\r\n        window['assetManifest'] = this;\r\n        this.assetId2Name = json.assetId2Name;\r\n        this.zipId2Name = json.zipId2Name;\r\n        this.zipAssets = json.zipAssets;\r\n        this.assetsDependencie = json.assetsDependencie;\r\n        this.prefabDependencie = json.prefabDependencie;\r\n\r\n        var hasAssetsDependencie = false;\r\n        if(this.assetsDependencie)\r\n        {\r\n            for(let assetId in this.assetsDependencie)\r\n            {\r\n                hasAssetsDependencie = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if(!hasAssetsDependencie)\r\n        {\r\n            this.assetsDependencie = this.prefabDependencie;\r\n        }\r\n\r\n\r\n\r\n        for(let assetId in this.assetId2Name)\r\n        {\r\n            let assetName = this.assetId2Name[assetId];\r\n            this.assetName2Id[assetName] = parseInt(assetId) ;\r\n        }\r\n\r\n        for(let zipId in this.zipAssets)\r\n        {\r\n            let zipIdInt = parseInt(zipId)\r\n            let assetIdList = this.zipAssets[zipId];\r\n            for(let id of assetIdList)\r\n            {\r\n                this.assetId2ZipId[id] = zipIdInt ;\r\n            }\r\n        }\r\n\r\n        this.InitAssetDependencieZipPaths();\r\n        this.InitDebug();\r\n    }\r\n\r\n    private InitAssetDependencieZipPaths()\r\n    {\r\n        for(let assetId in this.assetsDependencie)\r\n        {\r\n            this.GetAssetDependencieZipPathList(parseInt(assetId));\r\n        }\r\n    }\r\n\r\n    \r\n    private InitDebug()\r\n    {\r\n        for(let assetId in this.assetsDependencie)\r\n        {\r\n            var assetName = this.GetAssetName(assetId);\r\n            var assetNames = this.assetName2DependencieAssetNames[assetName] = [];\r\n            var assetPaths = this.assetName2DependencieAssetPaths[assetName] = [];\r\n            var dependenceAssetIdList = this.assetsDependencie[assetId];\r\n            for(let itemAssetId of dependenceAssetIdList)\r\n            {\r\n                let itemAssetName = this.GetAssetName(itemAssetId);\r\n                assetNames.push(itemAssetName);\r\n                assetPaths.push(this.GetAssetPathByAssetName(itemAssetName));\r\n            }\r\n        }\r\n\r\n        \r\n        for(let zipId in this.zipAssets)\r\n        {\r\n            var zipName = this.GetZipName(zipId);\r\n            var assetNames = this.zipName2DependencieAssetNames[zipName] = [];\r\n            var dependenceAssetIdList = this.zipAssets[zipId];\r\n            for(let itemAssetId of dependenceAssetIdList)\r\n            {\r\n                assetNames.push(this.GetAssetName(itemAssetId));\r\n            }\r\n        }\r\n    }\r\n\r\n    \r\n    /** 资源清单是否存在该资源 */\r\n    HasAsset(assetName:string):boolean\r\n    {\r\n        return this.GetAssetId(assetName) != undefined;\r\n    }\r\n\r\n    \r\n    /** 资源清单是否存在该资源, 根据路径 */\r\n    HasAssetByPath(assetPath: string):boolean\r\n    {\r\n        var assetName:string =this.GetAssetNameByPath(assetPath);\r\n        return this.HasAsset(assetName);\r\n    }\r\n\r\n    /** 获取资源ID */\r\n    GetAssetId(assetName:string):number\r\n    {\r\n        return this.assetName2Id[assetName];\r\n    }\r\n\r\n    /** 获取资源名称 */\r\n    GetAssetName(assetId:number | string):string\r\n    {\r\n        return this.assetId2Name[assetId];\r\n    }\r\n    \r\n    /** 获取资源名称, 根据Url */\r\n    GetAssetNameByPath(assetPath: string):string\r\n    {\r\n        var assetName:string = assetPath.replace(this.srcRootPath, \"\");\r\n        return assetName;\r\n    }\r\n    \r\n    \r\n    /** 获取资源路径, 根据AssetName */\r\n    GetAssetPathByAssetName(assetName: string):string\r\n    {\r\n        var assetPath:string = this.srcRootPath + assetName;\r\n        return assetPath;\r\n    }\r\n\r\n    /** 获取资源所在Zip Id */\r\n    GetAssetZipId(assetId: number):number\r\n    {\r\n        return this.assetId2ZipId[assetId];\r\n    }\r\n    \r\n    /** 获取资源所在Zip Name */\r\n    GetAssetZipName(assetId: number):string\r\n    {\r\n        let zipId = this.GetAssetZipId(assetId);\r\n        return this.GetZipName(zipId);\r\n    }\r\n    \r\n    /** 获取资源所在Zip Path */\r\n    GetAssetZipPath(asset: AssetIdOrName):string\r\n    {\r\n        let assetId:number = this.ToAssetId(asset);\r\n        let zipId = this.GetAssetZipId(assetId);\r\n        let zipName =  this.GetZipName(zipId);\r\n\r\n        if(!zipName)\r\n        {\r\n            console.error(`没找到资源的Zip asset=${asset} `);\r\n        }\r\n        \r\n        let zipPath = this.GetZipPath(zipName);\r\n        return zipPath;\r\n    }\r\n\r\n    \r\n    /** 获取资源所在Zip Path */\r\n    GetAssetZipPathByPath(assetPath: string):string\r\n    {\r\n        let assetName = this.GetAssetNameByPath(assetPath);\r\n        let zipPath = this.GetAssetZipPath(assetName);\r\n        return zipPath;\r\n    }\r\n\r\n    \r\n\r\n    \r\n    /** 获取Zip Path */\r\n    GetZipPath(zipName: string):string\r\n    {\r\n        return this.zipRootPath + zipName + this.zipExt;\r\n    }\r\n\r\n    /** 获取Zip名称 */\r\n    GetZipName(zipId:int | string):string\r\n    {\r\n        return this.zipId2Name[zipId];\r\n    }\r\n\r\n    private ToAssetId(asset:AssetIdOrName):number\r\n    {\r\n        let assetId:number;\r\n        if(typeof asset == \"string\")\r\n        {\r\n            assetId = this.GetAssetId(asset);\r\n        }\r\n        else\r\n        {\r\n            assetId = asset;\r\n        }\r\n        return assetId;\r\n    }\r\n\r\n     /** 获取资源依赖的 AssetName名称列表 */\r\n     GetAssetDependencieNameList(asset:AssetIdOrName):string[]\r\n     {\r\n        let assetId:number = this.ToAssetId(asset);\r\n        let assetName:string = this.GetAssetName(assetId);\r\n        var assetNames = this.assetName2DependencieAssetNames[assetName];\r\n        return assetNames;\r\n     }\r\n     \r\n     /** 获取资源依赖的 AssetName名称列表 */\r\n     GetAssetDependenciePathList(asset:AssetIdOrName):string[]\r\n     {\r\n        let assetId:number = this.ToAssetId(asset);\r\n        let assetName:string = this.GetAssetName(assetId);\r\n        var assetPaths = this.assetName2DependencieAssetPaths[assetName];\r\n        return assetPaths;\r\n     }\r\n     \r\n     /** 获取资源依赖的 AssetName名称列表 */\r\n     GetAssetDependenciePathListByAssetPath(assetPath:string):string[]\r\n     {\r\n        let assetName = this.GetAssetNameByPath(assetPath);\r\n        return this.GetAssetDependenciePathList(assetName);\r\n     }\r\n\r\n    private tmpMap:Map<string, any> = new Map<string, any>();\r\n    /** 获取资源依赖的Zip 名称列表 */\r\n    GetAssetDependencieZipNameList(asset:AssetIdOrName):string[]\r\n    {\r\n        let assetId:number = this.ToAssetId(asset);\r\n        if(this.assetId2DependencieZipNames[assetId])\r\n        {\r\n            return this.assetId2DependencieZipNames[assetId];\r\n        }\r\n\r\n        let zipNames:string[] = [];\r\n        \r\n\r\n        if(!assetId)\r\n        {\r\n            console.error(`AssetManifest.GetAssetDependencieZipNameList,  assetId 不存在 assetId=${assetId},  asset=${asset}`);\r\n            return zipNames;\r\n        }\r\n\r\n        let assetIdList = this.assetsDependencie[assetId];\r\n        if(!assetIdList)\r\n        {\r\n            console.error(`AssetManifest.GetAssetDependencieZipNameList,  assetIdList 不存在,  asset=${this.GetAssetName(assetId)}`);\r\n            return zipNames;\r\n        }\r\n\r\n        var tmpMap = this.tmpMap;\r\n        tmpMap.clear();\r\n        for(let assetId of assetIdList)\r\n        {\r\n            let zipName = this.GetAssetZipName(assetId);\r\n            if(zipName)\r\n            {\r\n                if(!tmpMap.has(zipName))\r\n                {\r\n                    zipNames.push(zipName);\r\n                    tmpMap.set(zipName, true);\r\n                }\r\n            }\r\n        }\r\n        tmpMap.clear();\r\n\r\n        \r\n        var assetName = this.GetAssetName(assetId);\r\n        this.assetId2DependencieZipNames[assetId] = zipNames;\r\n        this.assetName2DependencieZipNames[assetName] = zipNames;\r\n        return zipNames;\r\n    }\r\n\r\n    \r\n    /** 获取资源依赖的Zip 路径列表 */\r\n    GetAssetDependencieZipPathList(asset:AssetIdOrName):string[]\r\n    {\r\n        let assetId:number = this.ToAssetId(asset);\r\n        if(this.assetId2DependencieZipPaths[assetId])\r\n        {\r\n            return this.assetId2DependencieZipPaths[assetId];\r\n        }\r\n\r\n        let zipPaths:string[] = [];\r\n\r\n        let zipNames = this.GetAssetDependencieZipNameList(assetId);\r\n        for(let zipName of zipNames)\r\n        {\r\n            let zipPath = this.GetZipPath(zipName)\r\n            zipPaths.push(zipPath);\r\n        }\r\n\r\n        var assetName = this.GetAssetName(assetId);\r\n\r\n        this.assetId2DependencieZipPaths[assetId] = zipPaths;\r\n        this.assetName2DependencieZipPaths[assetName] = zipPaths;\r\n        \r\n        return zipPaths;\r\n    }\r\n\r\n    \r\n    private tmpMap2:Map<string, any> = new Map<string, any>();\r\n    /** 获取资源依赖的Zip 路径列表 */\r\n    GetAssetListDependencieZipPathList(assetList:string[] | number[]):string[]\r\n    {\r\n        let zipPaths:string[] = [];\r\n        if(assetList.length == 0)\r\n        {\r\n            return zipPaths;\r\n        }\r\n\r\n        \r\n        var tmpMap = this.tmpMap;\r\n        tmpMap.clear();\r\n\r\n        for(let asset of assetList)\r\n        {\r\n            let pathList = this.GetAssetDependencieZipPathList(asset);\r\n            for(let path of pathList)\r\n            {\r\n                if(!tmpMap.has(path))\r\n                {\r\n                    zipPaths.push(path);\r\n                    tmpMap.set(path, true);\r\n                }\r\n            }\r\n        }\r\n        tmpMap.clear();\r\n\r\n        return zipPaths;\r\n    }\r\n\r\n    \r\n    GetEnumZipAssetDataType(assetPath: string):EnumZipAssetDataType\r\n    {\r\n        let type = Laya.Loader.getTypeFromUrl(assetPath);\r\n        var extension = Laya.Utils.getFileExtension(assetPath);\r\n        let t:EnumZipAssetDataType;\r\n        switch(type)\r\n        {\r\n            case \"image\":\r\n                t = EnumZipAssetDataType.base64;\r\n                break;\r\n            default:\r\n                switch(extension)\r\n                {\r\n                    case \"lmat\":\r\n                    case \"lh\":\r\n                        t = EnumZipAssetDataType.string;\r\n                        break;\r\n                    default:\r\n                        t = EnumZipAssetDataType.arraybuffer;\r\n                        break;\r\n                }\r\n\r\n                break;\r\n        }\r\n        return t;\r\n    }\r\n\r\n\r\n\r\n\r\n    private static _Instance: AssetManifest;\r\n    static get Instance(): AssetManifest\r\n    {\r\n        if (!AssetManifest._Instance)\r\n        {\r\n            AssetManifest._Instance = new AssetManifest();\r\n        }\r\n        return AssetManifest._Instance;\r\n    }\r\n\r\n    /** 初始化 */\r\n    static async InitAsync(manifestPath:string, srcRootPath: string, zipRootPath: string, zipExt?:string): Promise<AssetManifest>\r\n    {\r\n        AssetManifest._Instance = await this.LoadAsync(manifestPath, srcRootPath, zipRootPath, zipExt);\r\n        return AssetManifest._Instance;\r\n    }\r\n\r\n    /** 加载资源清单配置 */\r\n    static async LoadAsync(path:string, srcRootPath: string, zipRootPath: string, zipExt?:string): Promise<AssetManifest>\r\n    {\r\n        return new Promise<any>((resolve)=>\r\n        {\r\n            Laya.loader.load(path, \r\n                Laya.Handler.create(null, (res: any) =>\r\n                {\r\n                    let manifest = new AssetManifest();\r\n                    if(srcRootPath)\r\n                    {\r\n                        manifest.srcRootPath = srcRootPath;\r\n                    }\r\n\r\n                    if(zipRootPath)\r\n                    {\r\n                        manifest.zipRootPath = zipRootPath;\r\n                    }\r\n\r\n\r\n                    if(zipExt)\r\n                    {\r\n                        manifest.zipExt = zipExt;\r\n                    }\r\n                    manifest.SetJson(res);\r\n\r\n                    resolve(manifest);\r\n                }), \r\n                null, Laya.Loader.JSON);\r\n         });\r\n    }\r\n\r\n}\r\n\r\nwindow['AssetManifest'] = AssetManifest;","import ZipManager from \"../ZipManager\";\r\n\r\n\r\n\r\nexport default class LayaExtends_Loader \r\n{\r\n    static UseAsync:boolean = true;\r\n    static InitCode()\r\n    {\r\n        new LayaExtends_Loader().InitCode();\r\n    }\r\n    \r\n    private InitCode()\r\n    {\r\n        var Loader: any = Laya.Loader;\r\n        Loader.prototype.src_loadHttpRequestWhat = Loader.prototype._loadHttpRequestWhat;\r\n        Loader.prototype._loadHttpRequestWhat = this._loadHttpRequestWhat;\r\n\r\n        Loader.prototype.src_loadResourceFilter = Loader.prototype._loadResourceFilter;\r\n        Loader.prototype._loadResourceFilter = this._loadResourceFilter;\r\n\r\n        Loader.prototype.src_loadHttpRequest = Loader.prototype._loadHttpRequest;\r\n        Loader.prototype._loadHttpRequest = this._loadHttpRequest;\r\n\r\n        Loader.prototype.src_loadHtmlImage =  Loader.prototype._loadHtmlImage;\r\n        Loader.prototype._loadHtmlImage = this._loadHtmlImage;\r\n\r\n        \r\n\r\n        Loader.src_clearRes =  Loader.clearRes;\r\n        Loader.clearRes = LayaExtends_Loader.clearRes;\r\n    }\r\n\r\n\r\n    \r\n    /**\r\n     * 清理指定资源地址的缓存。 \r\n     * @param url 资源地址。\r\n     */\r\n    static clearRes(url: string): void \r\n    {\r\n        (<any>Loader).src_clearRes(url);\r\n\r\n        if(ZipManager.enable)\r\n        {\r\n            ZipManager.Instance.OnClearResouceAsset(url);\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    \r\n\t/**@private */\r\n    protected onProgress(value: number): void \r\n    {\r\n\t}\r\n\r\n\t/**@private */\r\n    protected onError(message: string): void \r\n    {\r\n\t}\r\n\r\n\t/**\r\n\t * 资源加载完成的处理函数。\r\n\t * @param\tdata 数据。\r\n\t */\r\n    protected onLoaded(data: any = null): void \r\n    {\r\n    }\r\n\r\n\r\n    private _loadResource(type, url)\r\n    {\r\n\r\n    }\r\n\r\n\r\n    \r\n    private src_loadHttpRequestWhat(url, contentType)\r\n    {\r\n\r\n    }\r\n\r\n    private _loadHttpRequestWhat(url, contentType) \r\n    {\r\n        \r\n        var ext =  Laya.Utils.getFileExtension(url);\r\n        if(ext == ZipManager.Instance.zipExtName || !ZipManager.Instance.HasManifestAssetByUrl(url))\r\n        {\r\n            this.src_loadHttpRequestWhat(url, contentType);\r\n            return;\r\n        }\r\n        this._loadHttpRequest(url, contentType, this, this.onLoaded, this, this.onProgress, this, this.onError);\r\n    }\r\n\r\n    private src_loadResourceFilter(type: string, url: string): void \r\n    {\r\n\r\n    }\r\n\r\n    private _loadResourceFilter(type: string, url: string): void \r\n    {\r\n        var ext =  Laya.Utils.getFileExtension(url);\r\n        if(ext == ZipManager.Instance.zipExtName || !ZipManager.Instance.HasManifestAssetByUrl(url))\r\n        {\r\n            this.src_loadResourceFilter(type, url);\r\n            return;\r\n        }\r\n\r\n\r\n\r\n\t\tthis._loadResource(type, url);\r\n    }\r\n    \r\n    \r\n    private src_loadHttpRequest(url, contentType, onLoadCaller:LayaExtends_Loader, onLoad:Function, onProcessCaller, onProcess, onErrorCaller, onError)\r\n    {\r\n\r\n    }\r\n\r\n    private async _loadHttpRequest(url, contentType, onLoadCaller:LayaExtends_Loader, onLoad:Function, onProcessCaller, onProcess, onErrorCaller, onError)\r\n    {\r\n        var ext =  Laya.Utils.getFileExtension(url);\r\n        if(ext == ZipManager.Instance.zipExtName)\r\n        {\r\n            this.src_loadHttpRequest(url, contentType, onLoadCaller, onLoad, onProcessCaller, onProcess, onErrorCaller, onError);\r\n            return;\r\n        }\r\n\r\n        ZipManager.Instance.GetOrLoadAssetData(url, Handler.create(this, (data)=>{\r\n            if(data)\r\n            {\r\n                Laya.timer.frameOnce(1, this, ()=>{\r\n                    // console.log(\"_loadHttpRequest \", url);\r\n                    if(onProcess) onProcess.call(onLoadCaller, 1);\r\n                    onLoad.call(onLoadCaller, data)\r\n                })\r\n                return;\r\n            }\r\n            else\r\n            {\r\n                // console.log(\"src_loadHttpRequest \", url);\r\n                this.src_loadHttpRequest(url, contentType, onLoadCaller, onLoad, onProcessCaller, onProcess, onErrorCaller, onError);\r\n            }\r\n        }))\r\n\r\n\r\n        // var data:any;\r\n        // if(LayaExtends_Loader.UseAsync)\r\n        // {\r\n        //     data =  await ZipManager.Instance.GetOrLoadAssetDataAsync(url);\r\n        // }\r\n        // else\r\n        // {\r\n        //     data =  ZipManager.Instance.GetAssetData(url);\r\n        // }\r\n\r\n        // if(data)\r\n        // {\r\n        //     // console.log(\"_loadHttpRequest \", url);\r\n        //     if(onProcess) onProcess.call(onLoadCaller, 1);\r\n        //     onLoad.call(onLoadCaller, data)\r\n        //     return;\r\n        // }\r\n        // else\r\n        // {\r\n        //     // console.log(\"src_loadHttpRequest \", url);\r\n        //     this.src_loadHttpRequest(url, contentType, onLoadCaller, onLoad, onProcessCaller, onProcess, onErrorCaller, onError);\r\n        // }\r\n\r\n    }\r\n\r\n    \r\n    private src_loadHtmlImage(url:string, onLoadCaller, onLoad, onErrorCaller, onError) \r\n    {\r\n\r\n    }\r\n\r\n    private async _loadHtmlImage(url:string, onLoadCaller, onLoad, onErrorCaller, onError) \r\n    {\r\n        if(url.indexOf(\"Conventional/res3d/Conventional\") != -1)\r\n        {\r\n            console.error(\"_addHierarchyInnerUrls path=\", url);\r\n        }\r\n        \r\n        ZipManager.Instance.GetOrLoadAssetData(url, Handler.create(this, (data)=>{\r\n            if(data)\r\n            {\r\n                \r\n                Laya.timer.frameOnce(1, this, ()=>{\r\n                    // console.log(\"_loadHtmlImage \", url);\r\n                    this.src_loadHtmlImage(data, onLoadCaller, onLoad, onErrorCaller, onError)\r\n                })\r\n            }\r\n            else\r\n            {\r\n                // console.log(\"src_loadHtmlImage \", url);\r\n                this.src_loadHtmlImage(url, onLoadCaller, onLoad, onErrorCaller, onError) \r\n            }\r\n        }))\r\n\r\n        // if(LayaExtends_Loader.UseAsync)\r\n        // {\r\n        //     data =  await ZipManager.Instance.GetOrLoadAssetDataAsync(url);\r\n        // }\r\n        // else\r\n        // {\r\n        //     data =  ZipManager.Instance.GetAssetData(url);\r\n        // }\r\n\r\n        \r\n        \r\n    }\r\n}","import FileTask from \"./FileTask\";\r\n\r\n/** 文件块 */\r\nexport default class FileBlock\r\n{\r\n    /** 文件任务 */\r\n    fileTask:FileTask;\r\n    /** 块索引 */\r\n    index:number = 0;\r\n\r\n    /** range begin */\r\n    begin: number = 0;\r\n    /** range end */\r\n    end: number = 0;\r\n    /** 已经加载了的内容 */\r\n    responseList:any[] = [];\r\n    /** 已经加载了的大小, 是按总大小的位置 */\r\n    progressList:any[] = [];\r\n    /** 第几次请求 */\r\n    sendIndex = -1;\r\n\r\n    /** 获取从加载开始位置 */\r\n    get rangeBegin(): number\r\n    {\r\n        return this.begin + this.loadedSize;\r\n    }\r\n\r\n    /** 已经加载了的大小 */\r\n    get loadedSize():number\r\n    { \r\n        var v = 0;\r\n        for(var i = 0, len=this.progressList.length; i < len; i ++)\r\n        {\r\n            v += this.progressList[i];\r\n        }\r\n\r\n        // for(var i = 0, len=this.responseList.length; i < len; i ++)\r\n        // {\r\n        //     if(!this.responseList[i])\r\n        //     {\r\n        //         continue;\r\n        //     }\r\n            \r\n        //     // console.log(this.responseList[i]);\r\n        //     // console.log(this.responseList[i].byteLength)\r\n        // }\r\n\r\n        return v;\r\n    }\r\n\r\n    // getLoadedSize():number\r\n    // {\r\n    //     var v = 0;\r\n    //     for(var i = 0, len=this.progressList.length; i < len; i ++)\r\n    //     {\r\n    //         v += this.progressList[i];\r\n    //     }\r\n\r\n    //     for(var i = 0, len=this.responseList.length; i < len; i ++)\r\n    //     {\r\n    //         console.log(this.responseList[i].length)\r\n    //     }\r\n\r\n    //     return v;\r\n    // }\r\n\r\n    Reset()\r\n    {\r\n        this.fileTask = null;\r\n        this.begin = 0;\r\n        this.end = 0;\r\n        this.responseList.length = 0;\r\n        this.progressList.length = 1;\r\n        this.progressList[0] = 0;\r\n        this.sendIndex = -1;\r\n\r\n        this._isAbort = false;\r\n        this._isComplete = false;\r\n    }\r\n\r\n    /** 是否中止加载 */\r\n    _isAbort: boolean = false;\r\n    /** 是否加载完成 */\r\n    _isComplete: boolean = false;\r\n\r\n    get isAbort(): boolean\r\n    {\r\n        return this._isAbort;\r\n    }\r\n    \r\n    get isComplete(): boolean\r\n    {\r\n        return this._isComplete;\r\n    }\r\n\r\n    OnEnd(isAbort?: boolean)\r\n    {\r\n        this._isAbort = isAbort;\r\n        this._isComplete = this.loadedSize == this.end;\r\n        this.fileTask.OnBlockEnd(this);\r\n    }\r\n\r\n\r\n    MergeToBuff(buff:Int8Array)\r\n    {\r\n        var offset = this.begin;\r\n        for(var i = 0, len= this.responseList.length; i < len; i ++)\r\n        {\r\n            var item:ArrayBuffer = this.responseList[i];\r\n            var itemBuff = new Int8Array(item);\r\n            buff.set(itemBuff, offset);\r\n            offset += item.byteLength;\r\n        }\r\n    }\r\n\r\n\r\n\r\n    private static pool: FileBlock[] = [];\r\n    static PoolGetItem():FileBlock\r\n    {\r\n        var item: FileBlock;\r\n        if(this.pool.length > 0)\r\n        {\r\n            item = this.pool.shift();\r\n        }\r\n        else\r\n        {\r\n            item = new FileBlock();\r\n        }\r\n        item.Reset();\r\n        return item;\r\n    }\r\n\r\n    static PoolRecoverItem(item: FileBlock)\r\n    {\r\n        if(this.pool.indexOf(item) == -1)\r\n        {\r\n            return this.pool.push(item);\r\n        }\r\n    }\r\n}","import Handler = Laya.Handler;\r\nimport HttpRequestHeadPool from \"./HttpRequestHeadPool\";\r\nexport default class HttpRequestRangePool\r\n{\r\n    static MaxNum = 3;\r\n    static pool: XMLHttpRequest[] = [];\r\n    static currNum = 0;\r\n    static useNum = 0;\r\n    \r\n    private static GetItem()\r\n    {\r\n        var num = Laya.loader._loaderCount + HttpRequestHeadPool.useNum + HttpRequestRangePool.useNum;\r\n        if(num >= 4)\r\n        {\r\n            // console.log(\"当前加载数量超过 Range useNum=\", HttpRequestRangePool.useNum, \"Head useNum=\" + HttpRequestHeadPool.useNum, \"maxLoader=\", Laya.loader.maxLoader, \"_loaderCount=\",Laya.loader._loaderCount );\r\n            return null;\r\n        }\r\n        \r\n\r\n        if(this.pool.length > 0)\r\n        {\r\n            this.useNum ++;\r\n            var item = this.pool.shift();\r\n            item['__inpool'] = false;\r\n            return item;\r\n        }\r\n        else\r\n        {\r\n            \r\n            this.useNum ++;\r\n            var item =  new XMLHttpRequest();\r\n            item['__inpool'] = false;\r\n            return item;\r\n\r\n            // if(this.currNum < this.MaxNum)\r\n            // {\r\n            //     this.currNum ++;\r\n            //     this.useNum ++;\r\n            //     var item =  new XMLHttpRequest();\r\n            //     item['__inpool'] = false;\r\n            //     return item;\r\n            // }\r\n            // else\r\n            // {\r\n            //     return null;\r\n            // }\r\n        }\r\n    }\r\n\r\n    static RecoverItem(xhr: XMLHttpRequest)\r\n    {\r\n        xhr.abort();\r\n        xhr.onreadystatechange = null;\r\n        xhr.onprogress = null;\r\n        xhr.onerror = null;\r\n        if(xhr['__inpool'])\r\n        {\r\n            console.log(\"HttpRequestPool RecoverItem 多次\");\r\n            return;\r\n        }\r\n        this.useNum --;\r\n\r\n        xhr['__inpool'] = true;\r\n        // if(this.pool.indexOf(xhr) == -1)\r\n        // {\r\n        //     xhr['__inpool'] = true;\r\n        //     this.pool.push(xhr);\r\n        // }\r\n\r\n       this.checkWait();\r\n\r\n       \r\n    }\r\n\r\n    private static checkWait()\r\n    {\r\n        if(this.wait.length > 0)\r\n        {\r\n            var item = this.GetItem();\r\n            if(item)\r\n            {\r\n                let waitItem = this.wait.shift();\r\n                waitItem.runWith(item);\r\n            }\r\n            Laya.timer.frameOnce(1, HttpRequestRangePool, this.checkWait, null, true);\r\n        }\r\n    }\r\n\r\n    \r\n    private static wait:Handler[] = [];\r\n    static Request(handler: Handler)\r\n    {\r\n        let item = this.GetItem();\r\n        if(item)\r\n        {\r\n            handler.runWith(item);\r\n        }\r\n        else\r\n        {\r\n            this.wait.push(handler);\r\n            Laya.timer.frameOnce(1, HttpRequestRangePool, this.checkWait, null, true);\r\n        }\r\n    }\r\n}","import Handler = Laya.Handler;\r\nimport HttpRequestRangePool from \"./HttpRequestRangePool\";\r\nexport default class HttpRequestHeadPool\r\n{\r\n    static MaxNum = 2;\r\n    static pool: XMLHttpRequest[] = [];\r\n    static currNum = 0;\r\n    static useNum = 0;\r\n    \r\n    private static GetItem()\r\n    {\r\n        var num = Laya.loader._loaderCount + HttpRequestHeadPool.useNum + HttpRequestRangePool.useNum;\r\n        if(num >= 4)\r\n        {\r\n            // console.log(\"当前加载数量超过 Range useNum=\", HttpRequestRangePool.useNum, \"Head useNum=\" + HttpRequestHeadPool.useNum, \"maxLoader=\", Laya.loader.maxLoader, \"_loaderCount=\",Laya.loader._loaderCount );\r\n            return null;\r\n        }\r\n        \r\n\r\n        if(this.pool.length > 0)\r\n        {\r\n            this.useNum ++;\r\n            var item = this.pool.shift();\r\n            item['__inpool'] = false;\r\n            return item;\r\n        }\r\n        else\r\n        {\r\n            this.useNum ++;\r\n            var item =  new XMLHttpRequest();\r\n            item['__inpool'] = false;\r\n            return item;\r\n            // if(this.currNum < this.MaxNum)\r\n            // {\r\n            //     this.currNum ++;\r\n            //     this.useNum ++;\r\n            //     var item =  new XMLHttpRequest();\r\n            //     item['__inpool'] = false;\r\n            //     return item;\r\n            // }\r\n            // else\r\n            // {\r\n            //     return null;\r\n            // }\r\n        }\r\n    }\r\n\r\n    static RecoverItem(xhr: XMLHttpRequest)\r\n    {\r\n        xhr.abort();\r\n        xhr.onreadystatechange = null;\r\n        xhr.onprogress = null;\r\n        xhr.onerror = null;\r\n        if(xhr['__inpool'])\r\n        {\r\n            console.log(\"HttpRequestPool RecoverItem 多次\");\r\n            return;\r\n        }\r\n        this.useNum --;\r\n\r\n        xhr['__inpool'] = true;\r\n        // if(this.pool.indexOf(xhr) == -1)\r\n        // {\r\n        //     xhr['__inpool'] = true;\r\n        //     this.pool.push(xhr);\r\n        // }\r\n\r\n       \r\n        this.checkWait();\r\n\r\n       \r\n    }\r\n\r\n    private static checkWait()\r\n    {\r\n        if(this.wait.length > 0)\r\n        {\r\n            var item = this.GetItem();\r\n            if(item)\r\n            {\r\n                let waitItem = this.wait.shift();\r\n                waitItem.runWith(item);\r\n            }\r\n            Laya.timer.frameOnce(1, HttpRequestHeadPool, this.checkWait, null, true);\r\n        }\r\n    }\r\n\r\n    \r\n    private static wait:Handler[] = [];\r\n    static Request(handler: Handler)\r\n    {\r\n        let item = this.GetItem();\r\n        if(item)\r\n        {\r\n            handler.runWith(item);\r\n        }\r\n        else\r\n        {\r\n            this.wait.push(handler);\r\n            Laya.timer.frameOnce(1, HttpRequestHeadPool, this.checkWait, null, true);\r\n        }\r\n    }\r\n}","\r\nimport Handler = Laya.Handler;\r\nimport HttpRequestHeadPool from \"./HttpRequestHeadPool\";\r\n/** Http Request Head */\r\nexport default class HRHead\r\n{\r\n    xhr: XMLHttpRequest;\r\n\r\n    url:string;\r\n    callback: Function;\r\n    callbackObj:any;\r\n\r\n    // constructor()\r\n    // {\r\n    //     this.xhr = new XMLHttpRequest();\r\n    //     this.xhr.onreadystatechange = (this.onEvent.bind(this));\r\n    // }\r\n\r\n    private onEvent(e)\r\n    {\r\n        // console.log(e);\r\n        // console.log(this.xhr.readyState, this.xhr.status);\r\n        if (this.xhr.readyState == 4) \r\n        {\r\n            // console.log(this.xhr.readyState, this.xhr.status, this.xhr.getResponseHeader('Content-Length'));\r\n            var fileSize = this.xhr.getResponseHeader('Content-Length');\r\n            if (fileSize) \r\n            {\r\n                // console.log(\"HRHead\", fileSize, this.url);\r\n                this.ResultCallbak(0, parseInt(fileSize));\r\n            } \r\n            else \r\n            {\r\n                // console.warn(\"HRHead 请求文件头失败\", this.url);\r\n                this.ResultCallbak(1, -1);\r\n            }\r\n        }\r\n    }\r\n\r\n    private onerror(e)\r\n    {\r\n        console.warn(\"HRHead 请求文件头失败\", this.url, e);\r\n        this.ResultCallbak(1, -1);\r\n    }\r\n\r\n    private ResultCallbak(errorCode: number, fileSize: number)\r\n    {\r\n        if(this.callback)\r\n        {\r\n            if(this.callbackObj)\r\n            {\r\n                this.callback.call(this.callbackObj, errorCode, fileSize, this.url);\r\n            }\r\n            else\r\n            {\r\n                this.callback(errorCode, fileSize, this.url);\r\n            }\r\n        }\r\n\r\n        this.callback = null;\r\n        this.callbackObj = null;\r\n        this.url = null;\r\n        if(this.xhr)\r\n        {\r\n            this.xhr.abort();\r\n        \r\n            HttpRequestHeadPool.RecoverItem(this.xhr);\r\n            this.xhr = null;\r\n            HRHead.RecoverItem(this);\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    Request(url: string, callback: Function, callbackObj?:any)\r\n    {\r\n        console.log(\"HRHead.Request\", url);\r\n        this.url = url;\r\n        this.callback = callback;\r\n        this.callbackObj = callbackObj;\r\n        HttpRequestHeadPool.Request(Handler.create(this, (xhr: XMLHttpRequest)=>\r\n        {\r\n            this.xhr = xhr;\r\n            this.xhr.onreadystatechange = (this.onEvent.bind(this));\r\n            this.xhr.onerror = (this.onerror.bind(this));\r\n            this.xhr.open('HEAD', url, true);\r\n            this.xhr.send()\r\n        }))\r\n    }\r\n\r\n\r\n    public static MaxNum = 2;\r\n    private static currNum = 0;\r\n    private static pool: HRHead[] = [];\r\n    private static GetItem()\r\n    {\r\n        if(this.pool.length > 0)\r\n        {\r\n            return this.pool.shift();\r\n        }\r\n        else\r\n        {\r\n            if(this.currNum < this.MaxNum)\r\n            {\r\n                this.currNum ++;\r\n                return new HRHead();\r\n            }\r\n            else\r\n            {\r\n                return null;\r\n            }\r\n        }\r\n    }\r\n\r\n    private static RecoverItem(item: HRHead)\r\n    {\r\n        if(this.wait.length > 0)\r\n        {\r\n            let waitItem = this.wait.shift();\r\n            item.Request(waitItem.url, waitItem.callback, waitItem.callbackObj);\r\n        }\r\n        else\r\n        {\r\n            if(this.pool.indexOf(item) == -1)\r\n            {\r\n                this.pool.push(item);\r\n            }\r\n        }\r\n    }\r\n\r\n    private static wait:IRequestItem[] = [];\r\n    static RequestSize(url: string, callback: Function, callbackObj?:any)\r\n    {\r\n        let item = this.GetItem();\r\n        if(item)\r\n        {\r\n            item.Request(url, callback, callbackObj);\r\n        }\r\n        else\r\n        {\r\n            this.wait.push({url: url, callback: callback, callbackObj:callbackObj});\r\n        }\r\n    }\r\n}\r\n\r\ninterface IRequestItem\r\n{\r\n    url:string,\r\n    callback: Function;\r\n    callbackObj?:any;\r\n}","import FileBlock from \"./FileBlock\";\r\nimport Handler = Laya.Handler;\r\nimport HttpRequestRangePool from \"./HttpRequestRangePool\";\r\n\r\nexport default class HRange\r\n{\r\n    xhr: XMLHttpRequest;\r\n    block: FileBlock;\r\n\r\n    get blockInfo()\r\n    {\r\n        return \"block_\" + this.block.index + \", sendIndex=\" + this.block.sendIndex;\r\n    }\r\n\r\n    // constructor()\r\n    // {\r\n    //     this.xhr = new XMLHttpRequest();\r\n    //     this.xhr.onreadystatechange = (this.onreadystatechange.bind(this));\r\n    //     this.xhr.onprogress = (this.onprogress.bind(this));\r\n    //     this.xhr.onerror = (this.onerror.bind(this));\r\n    // }\r\n    \r\n    private onreadystatechange(e)\r\n    {\r\n        if(!this.block)\r\n        {\r\n            return;\r\n        }\r\n\r\n        if(this.xhr.readyState >= XMLHttpRequest.LOADING)\r\n        {\r\n            if (this.xhr.response) \r\n            {\r\n                // console.log(this.blockInfo, \"responseList sendIndex \" ,this.block.sendIndex, this.xhr.response, \"readyState=\", this.xhr.readyState, \"status=\", this.xhr.status);\r\n                this.block.responseList[this.block.sendIndex] = this.xhr.response;\r\n            }\r\n        }\r\n\r\n        if (this.xhr.readyState == 4) \r\n        {\r\n            // console.log(this.blockInfo, \"HRange 完成\", \" readyState=\" + this.xhr.readyState, \" status=\"+ this.xhr.status, \"response=\", this.xhr.response, this.block.fileTask.url);\r\n             \r\n                \r\n            if (this.xhr.status >= 200 && this.xhr.status < 300 || this.xhr.response) \r\n            {\r\n                // console.log(this.blockInfo, \"OnEnd\");\r\n                this.OnEnd();\r\n            } \r\n            else \r\n            {\r\n                console.error(this.blockInfo, \"HRange 请求文件失败\", \" readyState=\" + this.xhr.readyState, \" status=\"+ this.xhr.status, \"response=\", this.xhr.response, this.block.fileTask.url);\r\n                // 加载错误就尝试重新加载\r\n                // this.Request(this.block, true);\r\n            }\r\n        }\r\n    }\r\n\r\n    \r\n    private onprogress (e) \r\n    {\r\n        // this.block.responseList[this.block.sendIndex] = this.xhr.response;\r\n        this.block.progressList[this.block.sendIndex] = e.loaded;\r\n        this.block.fileTask.OnPorgess(e.loaded, e.total);\r\n        // console.log(\"onprogress\", e);\r\n        // console.log(this.blockInfo, \"onprogress\", e.loaded, e.total,  Math.ceil(e.loaded/ e.total * 100) + \"%\", e);\r\n        // console.log(this.blockInfo, \"onprogress\", e.loaded, e.total,  Math.ceil(e.loaded/ e.total * 100) + \"%\");\r\n    }\r\n\r\n    private onabort()\r\n    {\r\n        console.warn(this.blockInfo, \"onabort\");\r\n        this.OnEnd(true);\r\n    }\r\n\r\n    private onerror(e)\r\n    {\r\n        console.warn(this.blockInfo, e, this.block.fileTask.url);\r\n        // 加载错误就尝试重新加载\r\n        Laya.timer.frameOnce(10, this, this.Send, [true]);\r\n        // this.Request(this.block, true);\r\n    }\r\n\r\n    private OnEnd(isAbort?: boolean)\r\n    {\r\n        this.block.OnEnd(isAbort);\r\n        this.block = null;\r\n        this.xhr.abort();\r\n        HttpRequestRangePool.RecoverItem(this.xhr);\r\n        this.xhr = null;\r\n\r\n        HRange.RecoverItem(this);\r\n    }\r\n\r\n    private Send(isError?: boolean)\r\n    {\r\n        var block = this.block;\r\n        if(isError)\r\n        {\r\n            if(!block.responseList[block.sendIndex])\r\n            {\r\n                block.progressList[block.sendIndex] = 0;\r\n            }\r\n            else\r\n            {\r\n                block.sendIndex ++;\r\n            }\r\n            \r\n        }\r\n        this.xhr.abort();\r\n        this.xhr.responseType = block.fileTask.responseType;\r\n        this.xhr.open(\"get\", block.fileTask.url, true);\r\n        if(this.block.end <= 0)\r\n        {\r\n            this.xhr.setRequestHeader(\"Range\",`bytes=0- `);\r\n        }\r\n        else\r\n        {\r\n            this.xhr.setRequestHeader(\"Range\",`bytes=${block.rangeBegin}-${block.end}`);\r\n        }\r\n        // this.xhr.setRequestHeader(\"content-type\", \"application/zip\");\r\n        this.xhr.setRequestHeader(\"content-type\", \"application/octet-stream\");\r\n        \r\n        this.xhr.send();\r\n        // console.log(this.blockInfo, \"HRRange.Send\", this.block.fileTask.url);\r\n    }\r\n\r\n    Request(block:FileBlock, isError?: boolean)\r\n    {\r\n        block.sendIndex ++;\r\n        this.block = block;\r\n        HttpRequestRangePool.Request(Handler.create(this, (xhr: XMLHttpRequest)=>{\r\n            this.xhr = xhr;\r\n            this.xhr.onreadystatechange = (this.onreadystatechange.bind(this));\r\n            this.xhr.onprogress = (this.onprogress.bind(this));\r\n            this.xhr.onerror = (this.onerror.bind(this));\r\n            this.Send();\r\n        }))\r\n\r\n    }\r\n\r\n    Abort()\r\n    {\r\n        this.xhr.abort();\r\n    }\r\n\r\n\r\n\r\n    \r\n    public static MaxNum = 2;\r\n    private static currNum = 0;\r\n    private static pool: HRange[] = [];\r\n    private static GetItem()\r\n    {\r\n        if(this.pool.length > 0)\r\n        {\r\n            return this.pool.shift();\r\n        }\r\n        else\r\n        {\r\n            if(this.currNum < this.MaxNum)\r\n            {\r\n                this.currNum ++;\r\n                return new HRange();\r\n            }\r\n            else\r\n            {\r\n                return null;\r\n            }\r\n        }\r\n    }\r\n\r\n    private static RecoverItem(item: HRange)\r\n    {\r\n        if(this.wait.length > 0)\r\n        {\r\n            let waitItem = this.wait.shift();\r\n            item.Request(waitItem);\r\n        }\r\n        else\r\n        {\r\n            if(this.pool.indexOf(item) == -1)\r\n            {\r\n                this.pool.push(item);\r\n            }\r\n        }\r\n    }\r\n\r\n    private static wait:FileBlock[] = [];\r\n    static Request(bolck: FileBlock)\r\n    {\r\n        let item = this.GetItem();\r\n        if(item)\r\n        {\r\n            item.Request(bolck);\r\n        }\r\n        else\r\n        {\r\n            this.wait.push(bolck);\r\n        }\r\n    }\r\n}","import FileBlock from \"./FileBlock\";\r\nimport HRHead from \"./HRHead\";\r\nimport HRange from \"./HRRange\";\r\n\r\n/** 文件任务 */\r\nexport default class FileTask\r\n{\r\n    /** 最大处理数量 */\r\n    static MaxBlockNum = 2;\r\n    /** 单个块最小大小 */\r\n    static singleTmpFileSize = 1024 * 1024 * 5;\r\n    // static singleTmpFileSize = 1024;\r\n\r\n\r\n\r\n    path: string;\r\n    url: string;\r\n    /** 文件总大小 */\r\n    totalSize: number;\r\n\r\n    /** 请求返回文件类型 */\r\n    responseType:XMLHttpRequestResponseType = \"\";\r\n    /** 合并后的结果 */\r\n    response: ArrayBuffer | string;\r\n\r\n    /** 结束时是否主动返回Bock */\r\n    isEndRecoverBlockList: boolean = false;\r\n    /** 结束时是否主动返回导对象池 */\r\n    isEndRecover: boolean = false;\r\n    /** 文件块列表 */\r\n    private blockList: FileBlock[] = [];\r\n    /** 文件块结束的数量 */\r\n    private blockEndCount: number = 0;\r\n\r\n    /** 回调 */\r\n    onCompleteHandler: Function;\r\n    /** 回调 */\r\n    onProgresssHandler: Function;\r\n    callbackObj: any;\r\n\r\n    /** 请求大小 */\r\n    RequestSize()\r\n    {\r\n        HRHead.RequestSize(this.url, this.OnGetSize, this);\r\n        // this.OnGetSize(-1, -1);\r\n    }\r\n\r\n    /** 获取导文件大小事件 */\r\n    private OnGetSize(error: number, fileSize: number, url?: string)\r\n    {\r\n        \r\n        this.totalSize = fileSize;\r\n        this.SpliteBlock();\r\n        this.RequestBlocksList();\r\n    }\r\n\r\n    /** 请求块列表 */\r\n    RequestBlocksList()\r\n    {\r\n        this.blockEndCount = 0;\r\n        for(var block of this.blockList)\r\n        {\r\n            if(block.isComplete)\r\n            {\r\n                this.blockEndCount ++;\r\n            }\r\n            else\r\n            {\r\n                HRange.Request(block);\r\n            }\r\n        }\r\n\r\n        if(this.blockEndCount >= this.blockList.length)\r\n        {\r\n            this.onEnd();\r\n        }\r\n    }\r\n\r\n\r\n\r\n    /** 切分文件块 */\r\n    SpliteBlock()\r\n    {\r\n        var size = this.totalSize;\r\n        var ProcessorCount = FileTask.MaxBlockNum;\r\n        var singleTmpFileSize = FileTask.singleTmpFileSize;\r\n        var blockList = this.blockList;\r\n\r\n\r\n        //文件块大小\r\n        var blockSize   = Math.floor(size / ProcessorCount);  \r\n        //余数\r\n        var modSize     = this.totalSize % ProcessorCount;\r\n\r\n        \r\n        var block:FileBlock;\r\n        if (size < singleTmpFileSize || size<= 0)\r\n        {\r\n            block = FileBlock.PoolGetItem();\r\n            block.fileTask = this;\r\n            block.index = 0;\r\n            block.begin = 0;\r\n            if(size <= 0)\r\n            {\r\n                block.end = -1;\r\n            }\r\n            else\r\n            {\r\n                block.end = size - 1;\r\n            }\r\n            blockList.push(block);\r\n        }\r\n        else\r\n        {\r\n            for(var i = 0; i < ProcessorCount; i ++)\r\n            {\r\n                block = FileBlock.PoolGetItem();\r\n                block.fileTask = this;\r\n                block.index = i;\r\n                block.begin = i * blockSize;\r\n                block.end = (i + 1) * blockSize - 1;\r\n\r\n                if (i == ProcessorCount - 1)\r\n                {\r\n                    block.end += modSize;\r\n                }\r\n                blockList.push(block);\r\n            }\r\n        }\r\n\r\n        // console.log(\"blockList.length=\", blockList.length);\r\n    }\r\n\r\n    /** 启动 */\r\n    Start(url: string, responseType:string=\"arraybuffer\")\r\n    {\r\n        this.url = url;\r\n        this.responseType = <any>responseType;\r\n        this.RequestSize();\r\n    }\r\n\r\n    /** 块结束事件 */\r\n    OnBlockEnd(block: FileBlock)\r\n    {\r\n        this.blockEndCount++;\r\n        if(this.blockEndCount >= this.blockList.length)\r\n        {\r\n            this.onEnd();\r\n        }\r\n    }\r\n\r\n    /** 结束 */\r\n    onEnd()\r\n    {\r\n        this.Merge();\r\n        Laya.Loader.cacheRes(this.path, this.response);\r\n        if(this.onCompleteHandler)\r\n        {\r\n            if(this.callbackObj)\r\n            {\r\n                this.onCompleteHandler.call(this.callbackObj, this.response, this.path);\r\n            }\r\n            else\r\n            {\r\n                this.onCompleteHandler(this.response, this.path);\r\n            }\r\n        }\r\n\r\n        if(this.isEndRecoverBlockList)\r\n        {\r\n            this.RecoverBlockList();\r\n        }\r\n\r\n        if(this.isEndRecover)\r\n        {\r\n            this.PoolRecoverItem();\r\n        }\r\n    }\r\n\r\n    /** 将block丢回对象池 */\r\n    RecoverBlockList()\r\n    {\r\n        for(var i = 0, len = this.blockList.length; i <  len; i++)\r\n        {\r\n            var block = this.blockList[i];\r\n            FileBlock.PoolRecoverItem(block);\r\n        }\r\n        this.blockList.length = 0;\r\n    }\r\n\r\n    /** 合并文件大小 */\r\n    Merge()\r\n    {\r\n        if(this.responseType == \"arraybuffer\" || this.responseType == <any>\"moz-chunked-arraybuffer\" || this.responseType == <any>\"ms-stream\")\r\n        {\r\n            this.MergeArrayBuffer();\r\n        }\r\n        // else if(this.responseType == \"text\")\r\n        else\r\n        {\r\n            this.MergeText();\r\n        }\r\n    }\r\n\r\n    /** 合并二进制文件 */\r\n    MergeArrayBuffer()\r\n    {\r\n        if(this.blockList.length == 1 && this.blockList[0].responseList.length == 1)\r\n        {\r\n            this.response =  this.blockList[0].responseList[0];\r\n        }\r\n        else\r\n        {\r\n            var arr = new ArrayBuffer(this.totalSize);\r\n            var buff = new Int8Array(arr);\r\n            \r\n            for(var i = 0, len = this.blockList.length; i <  len; i++)\r\n            {\r\n                var block = this.blockList[i];\r\n                block.MergeToBuff(buff);\r\n            }\r\n            this.response = arr;\r\n        }\r\n\r\n    }\r\n\r\n    \r\n    /** 合并文本文件 */\r\n    MergeText()\r\n    {\r\n        if(this.blockList.length == 1 && this.blockList[0].responseList.length == 1)\r\n        {\r\n            this.response = this.blockList[0].responseList[0];\r\n        }\r\n        else\r\n        {\r\n            var arr = [];\r\n            for(var i = 0, len = this.blockList.length; i <  len; i++)\r\n            {\r\n                var block = this.blockList[i];\r\n                arr.push(...block.responseList);\r\n            }\r\n            this.response = arr.join();\r\n        }\r\n\r\n    }\r\n\r\n\r\n    /** 丢回对象池 */\r\n    PoolRecoverItem()\r\n    {\r\n        this.url = null;\r\n        this.totalSize = 0;\r\n        this.loadedSize = 0;\r\n        this.loadedRate = 0;\r\n        this.responseType = \"\";\r\n        this.response = null;\r\n        this.isEndRecoverBlockList = false;\r\n        this.isEndRecover = false;\r\n        this.RecoverBlockList();\r\n        this.blockEndCount = 0;\r\n        this.onCompleteHandler = null;\r\n        this.callbackObj = null;\r\n        FileTask.RecoverItem(this);\r\n    }\r\n\r\n    loadedSize: number = 0;\r\n    loadedRate: number = 0;\r\n\r\n    OnPorgess(loadedSize, totalSize)\r\n    {\r\n        if(this.totalSize > 0)\r\n        {\r\n            this.loadedSize  = 0;\r\n            for(var i = 0, len = this.blockList.length; i < len; i ++)\r\n            {\r\n                this.loadedSize += this.blockList[i].loadedSize;\r\n            }\r\n            if(this.loadedSize > 0)\r\n            {\r\n                this.loadedRate = this.loadedSize / this.totalSize;\r\n            }\r\n        }\r\n        else\r\n        {\r\n            this.loadedSize = loadedSize;\r\n            this.totalSize = totalSize;\r\n            this.loadedRate = this.loadedSize / this.totalSize;\r\n        }\r\n        if(this.onProgresssHandler)\r\n        {\r\n            if(this.callbackObj)\r\n            {\r\n                this.onProgresssHandler.call(this.callbackObj, this.loadedRate);\r\n            }\r\n            else\r\n            {\r\n                this.onProgresssHandler(this.loadedRate);\r\n            }\r\n        }\r\n    }\r\n    \r\n    \r\n    private static pool: FileTask[] = [];\r\n    private static GetItem()\r\n    {\r\n        if(this.pool.length > 0)\r\n        {\r\n            return this.pool.shift();\r\n        }\r\n        else\r\n        {\r\n            return new FileTask();\r\n        }\r\n    }\r\n\r\n    private static RecoverItem(item: FileTask)\r\n    {\r\n        if(this.pool.indexOf(item) == -1)\r\n        {\r\n            this.pool.push(item);\r\n        }\r\n    }\r\n\r\n    static Request(path: string, onCompleteHandler?:Function, onProgresssHandler?:Function,  callbackObj?:any, responseType:string=\"arraybuffer\",  isEndRecoverBlockList: boolean=true, isEndRecover: boolean=true):FileTask\r\n    {\r\n        var res = Laya.Loader.getRes(path);\r\n        if(res)\r\n        {\r\n            if(onCompleteHandler)\r\n            {\r\n                if(callbackObj)\r\n                {\r\n                    onCompleteHandler.call(callbackObj, res, path);\r\n                }\r\n                else\r\n                {\r\n                    onCompleteHandler(res, path);\r\n                }\r\n            }\r\n            return;\r\n        }\r\n        var url = Laya.URL.formatURL(path)\r\n        // if(url.indexOf(\"Monster_2005_gongjianshou_Skin1.zip\") != -1)\r\n        // {\r\n        //     console.error(url);\r\n        // }\r\n        let item = this.GetItem();\r\n        item.path = path;\r\n        item.onCompleteHandler = onCompleteHandler;\r\n        item.onProgresssHandler = onProgresssHandler;\r\n        item.callbackObj = callbackObj;\r\n        item.isEndRecoverBlockList = isEndRecoverBlockList;\r\n        item.isEndRecover = isEndRecover;\r\n        item.Start(url, responseType);\r\n        return item;\r\n    }\r\n\r\n    static RequestList(pathList: string[],completeHandler?: Handler, progressHandler?: Handler)\r\n    {\r\n        let len = pathList.length;\r\n        if(len == 0)\r\n        {\r\n            if(completeHandler)\r\n            {\r\n                completeHandler.runWith(true);\r\n            }\r\n            return;\r\n        }\r\n        \r\n        if(progressHandler)\r\n        {\r\n            progressHandler.runWith(0);\r\n        }\r\n\r\n        let loadedNum = 0;\r\n        let onItemComplete = ()=>{\r\n            loadedNum ++;\r\n            if(progressHandler)\r\n            {\r\n                progressHandler.runWith(loadedNum / len);\r\n            }\r\n\r\n            if(loadedNum >= len)\r\n            {\r\n                if(completeHandler)\r\n                {\r\n                    completeHandler.runWith(true);\r\n                }\r\n            }\r\n        }\r\n\r\n        \r\n        let maxRate = 0;\r\n        let onItemProgerss = (rate)=>\r\n        {\r\n            if(len == 1)\r\n            {\r\n                if(progressHandler)\r\n                {\r\n                    maxRate = Math.max(rate, maxRate)\r\n                    progressHandler.runWith(maxRate);\r\n                }\r\n            }\r\n        }\r\n\r\n        for(var i = 0; i < len; i ++)\r\n        {\r\n            var url = pathList[i];\r\n            var task = this.Request(url, onItemComplete, onItemProgerss, null, \"arraybuffer\", true, true);\r\n        }\r\n    }\r\n}\r\nwindow['FileTask'] = FileTask;\r\nwindow['FileBlock'] = FileBlock;\r\nwindow['HRHead'] = HRHead;\r\nwindow['HRange'] = HRange;\r\n\r\n\r\nFileTask.MaxBlockNum = 5;\r\nFileTask.singleTmpFileSize =  1024 * 1024 * 5;\r\nHRHead.MaxNum = 5;\r\nHRange.MaxNum = 5;","import ZipManager from \"./ZipManager\";\r\nimport Handler = Laya.Handler;\r\nimport FileTask from \"../HttpRequestRange/FileTask\";\r\n\r\nexport default class JsZipAsync\r\n{\r\n    \r\n    \r\n\r\n    static loadPath(path: string, type:string, callback:Handler)\r\n    {\r\n        var isUseLaya = false;\r\n        if(path.indexOf(\"res3d/\") != -1)\r\n        {\r\n            if(path.indexOf(\"Effect_100\") != -1|| path.indexOf(\"Hero_100\") != -1)\r\n            {\r\n                isUseLaya = true;\r\n            }\r\n        }\r\n        \r\n        if(!isUseLaya)\r\n        {\r\n            FileTask.Request(path, (res:any, url)=>{\r\n                if(ZipManager.Instance.zipMap.has(path))\r\n                    {\r\n                        let zip = ZipManager.Instance.zipMap.get(path);\r\n                        callback.runWith(zip);\r\n                        return;\r\n                    }\r\n    \r\n                    JSZip.loadAsync(res).then((zip:JSZip)=>\r\n                    {\r\n                        callback.runWith(zip);\r\n                    }).catch((error)=>{\r\n                        console.error(error, path);\r\n                        callback.runWith(null);\r\n                    })\r\n            });\r\n        }\r\n        else\r\n        {\r\n            Laya.loader.load(path, \r\n                Laya.Handler.create(null, (res: any) =>\r\n                {\r\n                    if(ZipManager.Instance.zipMap.has(path))\r\n                    {\r\n                        let zip = ZipManager.Instance.zipMap.get(path);\r\n                        callback.runWith(zip);\r\n                        return;\r\n                    }\r\n    \r\n                    JSZip.loadAsync(res).then((zip:JSZip)=>\r\n                    {\r\n                        callback.runWith(zip);\r\n                    }).catch((error)=>{\r\n                        console.error(error, path);\r\n                        callback.runWith(null);\r\n                    })\r\n                }), \r\n                null, type);\r\n\r\n        }\r\n        \r\n    }\r\n\r\n    // static async loadPathAsync(path: string, type:string): Promise<JSZip>\r\n    // {\r\n    //     return new Promise<any>((resolve)=>\r\n    //     {\r\n    //         Laya.loader.load(path, \r\n    //             Laya.Handler.create(null, (res: any) =>\r\n    //             {\r\n    //                 if(ZipManager.Instance.zipMap.has(path))\r\n    //                 {\r\n    //                     let zip = ZipManager.Instance.zipMap.get(path);\r\n    //                     resolve(zip);\r\n    //                     return;\r\n    //                 }\r\n\r\n    //                 JSZip.loadAsync(res).then((zip:JSZip)=>\r\n    //                 {\r\n    //                     resolve(zip);\r\n    //                 }).catch((error)=>{\r\n    //                     console.error(error);\r\n    //                     resolve();\r\n    //                 })\r\n    //             }), \r\n    //             null, type, undefined, false);\r\n\t// \t});\r\n    // }\r\n\r\n    \r\n    // static async readAsync(zip:JSZip, path: string, type:string): Promise<any>\r\n    // {\r\n    //     return new Promise<any>((resolve)=>\r\n    //     {\r\n    //         zip.file(path).async(<any>type).then((data:any)=>\r\n    //         {\r\n    //             resolve(data);\r\n    //         }).catch((error)=>{\r\n    //             console.error(error);\r\n    //             resolve();\r\n    //         });\r\n\t// \t});\r\n    // }\r\n\r\n    \r\n    static read(zip:JSZip, path: string, type:string, callback: Handler)\r\n    {\r\n        zip.file(path).async(<any>type).then((data:any)=>\r\n        {\r\n            callback.runWith(data);\r\n        }).catch((error)=>\r\n        {\r\n            console.error(error, path);\r\n            callback.runWith(null);\r\n        });\r\n\r\n    }\r\n}","export default class AsyncUtil\r\n{\r\n    \r\n    static async MAwitFrame(delayFrame: number = 1):Promise<any>\r\n    {\r\n        return new Promise<any>((resolve)=>\r\n        {\r\n            Laya.timer.frameOnce(delayFrame, this, ()=>{\r\n                resolve();\r\n            })\r\n        });\r\n    }\r\n    \r\n    static ResolveDelayCall(resolve:Function, ...args)\r\n    {\r\n        Laya.timer.frameOnce(1, this, ()=>{\r\n            resolve(...args);\r\n        })\r\n    }\r\n\r\n    \r\n\tstatic async Load3DAsync(path: string):Promise<any>\r\n\t{\r\n        return new Promise<any>((resolve)=>\r\n        {\r\n\t\t\tLaya.loader.create(path, Laya.Handler.create(null, (res)=>\r\n\t\t\t{\r\n                AsyncUtil.ResolveDelayCall(resolve, res);\r\n\t\t\t}));\r\n\t\t});\r\n    }\r\n    \r\n\tstatic  Load3D(path: string, callbacker?:any, onComponent?:Function)\r\n\t{\r\n        Laya.loader.create(path, Laya.Handler.create(null, (res)=>\r\n        {\r\n            if(onComponent)\r\n            {\r\n               if(callbacker)\r\n               {\r\n                onComponent.call(callbacker, res);\r\n               } \r\n               else\r\n               {\r\n                onComponent(res); \r\n               }\r\n            }\r\n        }));\r\n    }\r\n}\r\n\r\nwindow['AsyncUtil'] = AsyncUtil;","import ZipManager from \"../ZipManager\";\r\nimport AsyncUtil from \"../AsyncUtil\";\r\n\r\nexport default class LayaExtends_LoaderManager \r\n{\r\n    static InitCode() {\r\n        new LayaExtends_LoaderManager().InitCode();\r\n    }\r\n    InitCode() {\r\n        var LoaderManager:any = Laya.LoaderManager;\r\n        // LoaderManager.prototype.src_doLoad = LoaderManager.prototype._doLoad;\r\n        // LoaderManager.prototype._doLoad = this._doLoad;\r\n\r\n        \r\n        LoaderManager.prototype.src_load = LoaderManager.prototype.load;\r\n        LoaderManager.prototype.load = this.load;\r\n        LoaderManager.prototype.__loadWaitZipAsync = this.__loadWaitZipAsync;\r\n\r\n        \r\n        LoaderManager.prototype.src_createLoad = LoaderManager.prototype._createLoad;\r\n        LoaderManager.prototype._createLoad = this._createLoad;\r\n        LoaderManager.prototype.___createLoadWaitZipAsync = this.___createLoadWaitZipAsync;\r\n\r\n\r\n        \r\n    }\r\n    \r\n    _loaderCount:number = 0;\r\n    // _createLoad\r\n    src_createLoad(url: any, complete: Handler|null = null, progress: Handler|null = null, type: string|null = null, constructParams: any[]|null = null, propertyParams: any = null, priority: number = 1, cache: boolean = true, ignoreCache: boolean = false): Laya.LoaderManager \r\n    {\r\n        return <any>this;\r\n    }\r\n\r\n    _createLoad(url: any, complete: Handler|null = null, progress: Handler|null = null, type: string|null = null, constructParams: any[]|null = null, propertyParams: any = null, priority: number = 1, cache: boolean = true, ignoreCache: boolean = false): Laya.LoaderManager \r\n    {\r\n        let manifestHas: boolean = false;\r\n        let zipHas: boolean = false;\r\n        let zipPath:string;\r\n        let zipManager:ZipManager;\r\n        if(ZipManager.enable && !(url instanceof Array))\r\n        {\r\n            zipManager = ZipManager.Instance;\r\n            manifestHas = zipManager.manifest.HasAssetByPath(url);\r\n            if(manifestHas)\r\n            {\r\n                zipPath = zipManager.GetAssetZipPathByAssetUrl(url);\r\n                zipHas = zipManager.HasZip(zipPath);\r\n            }\r\n        }\r\n\r\n        if (!manifestHas || zipHas) \r\n        {\r\n            return this.src_createLoad(url, complete, progress, type, constructParams, propertyParams, priority, cache, ignoreCache);\r\n        }\r\n\r\n        this.___createLoadWaitZipAsync(zipPath, url, complete, progress, type, constructParams, propertyParams, priority,cache, ignoreCache);\r\n\r\n        return <any>this;\r\n    }\r\n\r\n    \r\n    async ___createLoadWaitZipAsync(zipPath:string, url: any, complete: Handler|null = null, progress: Handler|null = null, type: string|null = null, constructParams: any[]|null = null, propertyParams: any = null, priority: number = 1, cache: boolean = true, ignoreCache: boolean = false): Laya.LoaderManager \r\n    {\r\n        ZipManager.Instance.GetZip(zipPath, Handler.create(this, ()=>{\r\n            this._loaderCount --;\r\n            var myComplete = Handler.create(this, (data)=>\r\n            {\r\n                this._loaderCount ++;\r\n                if(complete)\r\n                {\r\n                    complete.runWith(data);\r\n                }\r\n            })\r\n            this.src_createLoad(url, myComplete, progress, type, constructParams, propertyParams, priority,cache, ignoreCache);\r\n        }))\r\n\r\n        // // console.log(\"___createLoadWaitZipAsync await\",Laya.loader._loaderCount, url, zipPath);\r\n        // let zip = await ZipManager.Instance.GetZipAsync(zipPath);\r\n        // await AsyncUtil.MAwitFrame();\r\n        // // console.log(\"___createLoadWaitZipAsync set\", Laya.loader._loaderCount,url, zipPath);\r\n        // this._loaderCount --;\r\n        // var myComplete = Handler.create(this, (data)=>\r\n        // {\r\n        //     this._loaderCount ++;\r\n        //     if(complete)\r\n        //     {\r\n        //         complete.runWith(data);\r\n        //     }\r\n        // })\r\n        // this.src_createLoad(url, myComplete, progress, type, constructParams, propertyParams, priority,cache, ignoreCache);\r\n        return <any>this;\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    // load\r\n    src_load(url: string|string[]|any[], complete: Handler|null = null, progress: Handler|null = null, type: string|null = null, priority: number = 1, cache: boolean = true, group: string|null = null, ignoreCache: boolean = false, useWorkerLoader: boolean = Laya.WorkerLoader.enable): Laya.LoaderManager \r\n    {\r\n        return <any>this;\r\n    }\r\n\r\n    load(url: string|string[]|any[], complete: Handler|null = null, progress: Handler|null = null, type: string|null = null, priority: number = 1, cache: boolean = true, group: string|null = null, ignoreCache: boolean = false, useWorkerLoader: boolean = Laya.WorkerLoader.enable): Laya.LoaderManager \r\n    {\r\n        let manifestHas: boolean = false;\r\n        let zipHas: boolean = false;\r\n        let zipPath:string;\r\n        let zipManager:ZipManager;\r\n        if(ZipManager.enable && !(url instanceof Array))\r\n        {\r\n            zipManager = ZipManager.Instance;\r\n            manifestHas = zipManager.manifest.HasAssetByPath(url);\r\n            if(manifestHas)\r\n            {\r\n                zipPath = zipManager.GetAssetZipPathByAssetUrl(url);\r\n                zipHas = zipManager.HasZip(zipPath);\r\n            }\r\n        }\r\n\r\n        if (!manifestHas || zipHas) \r\n        {\r\n            return this.src_load(url, complete, progress, type, priority, cache, group, ignoreCache, useWorkerLoader);\r\n        }\r\n\r\n        this.__loadWaitZipAsync(zipPath, url, complete, progress, type, priority, cache, group, ignoreCache, useWorkerLoader);\r\n        return <any>this;\r\n    }\r\n\r\n    async __loadWaitZipAsync(zipPath:string, url: string|string[]|any[], complete: Handler|null = null, progress: Handler|null = null, type: string|null = null, priority: number = 1, cache: boolean = true, group: string|null = null, ignoreCache: boolean = false, useWorkerLoader: boolean = Laya.WorkerLoader.enable): Laya.LoaderManager \r\n    {\r\n        ZipManager.Instance.GetZip(zipPath, Handler.create(this, ()=>{\r\n            this._loaderCount --;\r\n            var myComplete = Handler.create(this, (data)=>\r\n            {\r\n                this._loaderCount ++;\r\n                if(complete)\r\n                {\r\n                    complete.runWith(data);\r\n                }\r\n            })\r\n            this.src_load(url, myComplete, progress, type, priority, cache, group, ignoreCache, useWorkerLoader);\r\n        }))\r\n        // // console.log(\"__loadWaitZipAsync await\",Laya.loader._loaderCount, url, zipPath);\r\n        // let zip = await ZipManager.Instance.GetZipAsync(zipPath);\r\n        // await AsyncUtil.MAwitFrame();\r\n        // // console.log(\"__loadWaitZipAsync set\", Laya.loader._loaderCount,url, zipPath);\r\n        // this._loaderCount --;\r\n        // var myComplete = Handler.create(this, (data)=>\r\n        // {\r\n        //     this._loaderCount ++;\r\n        //     if(complete)\r\n        //     {\r\n        //         complete.runWith(data);\r\n        //     }\r\n        // })\r\n        // this.src_load(url, myComplete, progress, type, priority, cache, group, ignoreCache, useWorkerLoader);\r\n        return <any>this;\r\n    }\r\n\r\n\r\n\r\n    // src_doLoad(resInfo) {\r\n    // }\r\n    // _doLoad(resInfo) {\r\n    //     if (ZipManager.enable) {\r\n    //         var has = ZipManager.Instance.manifest.HasAssetByPath(resInfo.url);\r\n            \r\n    //     }\r\n    //     this.src_doLoad(resInfo);\r\n    // }\r\n\r\n    \r\n}","import ZipManager from \"../ZipManager\";\r\n\r\nexport default class LayaExtends_Resouces\r\n{\r\n    static InitCode()\r\n    {\r\n        new LayaExtends_Resouces().InitCode();\r\n    }\r\n\r\n    \r\n    private InitCode()\r\n    {\r\n        var Resource: any = Laya.Resource;\r\n        Resource.prototype.src_destroy = Resource.prototype.destroy;\r\n        Resource.prototype.destroy = this.destroy;\r\n\r\n    }\r\n\r\n    _url: string;\r\n    src_destroy()\r\n    {\r\n\r\n    }\r\n\r\n\t/**\r\n\t * 销毁资源,销毁后资源不能恢复。\r\n\t */\r\n    destroy(): void \r\n    {\r\n        this.src_destroy();\r\n        if(ZipManager.enable)\r\n        {\r\n            if (this._url) \r\n            {\r\n                ZipManager.Instance.OnClearResouceAsset(this._url);\r\n            }\r\n        }\r\n\r\n    }\r\n}","import Handler = Laya.Handler;\r\nexport default class WaitCallbackList\r\n{\r\n    key: any;\r\n    list: Handler[] = [];\r\n\r\n    add(handler: Handler)\r\n    {\r\n        this.list.push(handler);\r\n    }\r\n\r\n    run()\r\n    {\r\n        for(var item of this.list)\r\n        {\r\n            item.run();\r\n        }\r\n    }\r\n\r\n    runWith(data:any)\r\n    {\r\n        \r\n        for(var item of this.list)\r\n        {\r\n            item.runWith(data);\r\n        }\r\n    }\r\n\r\n    clear()\r\n    {\r\n        this.list.length = 0;\r\n        this.key = null;\r\n    }\r\n\r\n    static map: Map<any, WaitCallbackList> = new Map<any, WaitCallbackList>();\r\n    static Get(key: any)\r\n    {\r\n        if(this.map.has(key))\r\n        {\r\n            return this.map.get(key);\r\n        }\r\n    }\r\n\r\n    static GetOrCreate(key: any)\r\n    {\r\n        if(this.map.has(key))\r\n        {\r\n            return this.map.get(key);\r\n        }\r\n\r\n        var item = Laya.Pool.createByClass(WaitCallbackList);\r\n        item.key = key;\r\n        this.map.set(key, item);\r\n        return item;\r\n    }\r\n\r\n    static Add(key:any, handler:Handler)\r\n    {\r\n        var item = this.GetOrCreate(key);\r\n        item.add(handler);\r\n    }\r\n\r\n    static Recover(key:any, item: WaitCallbackList)\r\n    {\r\n        item.clear();\r\n        this.map.delete(key);\r\n        Laya.Pool.recoverByClass(item);\r\n    }\r\n\r\n    static Run(key:any)\r\n    {\r\n        var item = this.Get(key);\r\n        if(item)\r\n        {\r\n            item.run();\r\n            this.Recover(key, item);\r\n        }\r\n        else\r\n        {\r\n            console.warn(\"WaitCallbackList没有这个的监听了\", key);\r\n        }\r\n    }\r\n\r\n    static RunWith(key:any, data: any)\r\n    {\r\n        var item = this.Get(key);\r\n        if(item)\r\n        {\r\n            item.runWith(data);\r\n            this.Recover(key, item);\r\n        }\r\n        else\r\n        {\r\n            console.warn(\"WaitCallbackList没有这个的监听了\", key);\r\n        }\r\n    }\r\n\r\n}","import AssetManifest from \"./AssetManifest\";\r\nimport LayaExtends_Loader from \"./LayaExtends/LayaExtends_Loader\";\r\nimport JsZipAsync from \"./JsZipAsync\";\r\nimport { EnumZipAssetDataType } from \"./ZipEnum\";\r\nimport DebugResources from \"../DebugResources/DebugResources\";\r\nimport AsyncUtil from \"./AsyncUtil\";\r\nimport LayaExtends_LoaderManager from \"./LayaExtends/LayaExtends_LoaderManager\";\r\nimport LayaExtends_Resouces from \"./LayaExtends/LayaExtends_Resouces\";\r\nimport Handler = Laya.Handler;\r\nimport WaitCallbackList from \"./WaitCallbackList\";\r\nexport default class ZipManager\r\n{\r\n    private static _Instance: ZipManager;\r\n    static get Instance(): ZipManager\r\n    {\r\n        if (!ZipManager._Instance)\r\n        {\r\n            ZipManager._Instance = new ZipManager();\r\n            window['zipManager'] = ZipManager._Instance;\r\n        }\r\n        return ZipManager._Instance;\r\n    }\r\n\r\n    zipExt = \".zip\";\r\n    zipExtName = \"zip\";\r\n    srcRootPath = \"res3d/Conventional/\";\r\n    zipRootPath = \"\";\r\n    /** 资源清单 */\r\n    _manifest:AssetManifest;\r\n    get manifest():AssetManifest\r\n    {\r\n        if(this.enablePve01 && this.isPve01)\r\n        {\r\n            return this.manifestPve01;\r\n        }\r\n        return this._manifest;\r\n    }\r\n\r\n    static enable: boolean = false;\r\n\r\n    /** 初始化 */\r\n    async InitAsync(manifestPath:string, srcRootPath: string, zipRootPath: string, zipExt?:string, isReplace?: boolean)\r\n    {\r\n        if(this._manifest && !isReplace)\r\n        {\r\n            console.log(\"已经初始了Zip资源清单\");\r\n            return;\r\n        }\r\n\r\n        if(zipExt)\r\n        {\r\n            this.zipExt = zipExt;\r\n            this.zipExtName = zipExt.replace('.', '');\r\n        }\r\n\r\n        await AssetManifest.InitAsync(manifestPath, srcRootPath,zipRootPath, zipExt);\r\n        this._manifest = AssetManifest.Instance;\r\n        this.srcRootPath = srcRootPath;\r\n        this.zipRootPath = zipRootPath;\r\n        ZipManager.enable = true;\r\n        this.InitCode();\r\n        this.InitResourceVersion();\r\n    }\r\n\r\n    /** 资源清单 */\r\n    manifestPve01:AssetManifest;\r\n\r\n    isPve01: boolean = false;\r\n    enablePve01: boolean = false;\r\n    async InitPVE01(pve01manifestPath:string)\r\n    {\r\n        this.manifestPve01 = await AssetManifest.LoadAsync(pve01manifestPath, this.srcRootPath, this.zipRootPath, this.zipExt);\r\n        this.enablePve01 = true;\r\n    }\r\n\r\n\r\n    private static isInitCode: boolean = false;\r\n    private InitCode()\r\n    {\r\n        if(ZipManager.isInitCode)\r\n        {\r\n            return;\r\n        }\r\n        ZipManager.isInitCode = true;\r\n        LayaExtends_Loader.InitCode();\r\n        LayaExtends_LoaderManager.InitCode();\r\n        LayaExtends_Resouces.InitCode();\r\n    }\r\n\r\n    resourceVersionManifestReverse:Map<string, string> = new Map<string, string>();\r\n    \r\n    private InitResourceVersion()\r\n    {\r\n        this.resourceVersionManifestReverse.clear();\r\n        let manifest = Laya.ResourceVersion.manifest;\r\n        for(let path in manifest)\r\n        {\r\n            let pathVer = manifest[path];\r\n            this.resourceVersionManifestReverse.set(pathVer, path);\r\n        }\r\n    }\r\n\r\n\r\n    /** Zip 资源 */\r\n    zipMap:Map<string, JSZip> = new Map<string, JSZip>();\r\n    /** 资源数据 */\r\n    assetMap:Map<string, any> = new Map<string, any>();\r\n    /** 资源引用数量 */\r\n    assetReferenceMap:Map<string, any> = new Map<string, any>();\r\n    /** Zip使用资源情况 */\r\n    zipUseAssetMap:Map<string, Map<string, any>> = new Map<string, Map<string, any>>();\r\n\r\n    GetZipUseAssetMap(zipPath: string, isCreate?: boolean):Map<string, any>\r\n    {\r\n        if(this.zipUseAssetMap.has(zipPath))\r\n        {\r\n            return this.zipUseAssetMap.get(zipPath);\r\n        }\r\n        else\r\n        {\r\n            if(isCreate)\r\n            {\r\n                var m = new Map<string, any>();\r\n                this.zipUseAssetMap.set(zipPath, m);\r\n                return m;\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n\r\n    /** 添加Zip引用资源 */\r\n    AddZipUseAsset(zipPath: string, assetPath: string)\r\n    {\r\n        var m = this.GetZipUseAssetMap(zipPath, true);\r\n        var num = m.getValueOrDefault(zipPath) + 1;\r\n        m.set(assetPath, num);\r\n    }\r\n\r\n    /** 移除Zip引用资源 */\r\n    RemoveZipUseAsset(zipPath: string, assetPath: string)\r\n    {\r\n        var m = this.GetZipUseAssetMap(zipPath, true);\r\n        var num = m.getValueOrDefault(zipPath) - 1;\r\n        if(num <= 0)\r\n        {\r\n            m.delete(assetPath);\r\n        }\r\n        else\r\n        {\r\n            m.set(assetPath, num);\r\n        }\r\n    }\r\n    \r\n    AddAssetReference(assetPath:string, count: number = 1)\r\n    {\r\n        if(this.assetReferenceMap.has(assetPath))\r\n        {\r\n            this.assetReferenceMap.set(assetPath, this.assetReferenceMap.get(assetPath) + count);\r\n        }\r\n        else\r\n        {\r\n            this.assetReferenceMap.set(assetPath, count);\r\n        }\r\n    }\r\n\r\n    RemoveAssetReference(assetPath:string, count: number = 1)\r\n    {\r\n        if(this.assetReferenceMap.has(assetPath))\r\n        {\r\n            this.assetReferenceMap.set(assetPath, this.assetReferenceMap.get(assetPath) - count);\r\n        }\r\n    }\r\n\r\n    \r\n    GetAssetReference(assetPath:string)\r\n    {\r\n        if(this.assetReferenceMap.has(assetPath))\r\n        {\r\n            return this.assetReferenceMap.get(assetPath);\r\n        }\r\n        return  0;\r\n    }\r\n\r\n    OnClearResouceAsset(assetUrl: string)\r\n    {\r\n        \r\n        let assetPath = this.AssetUrlToPath(assetUrl);\r\n        this.RemoveAssetReference(assetPath);\r\n        // console.log(\"ZipManager.OnClearResouceAsset\", assetPath);\r\n\r\n    }\r\n\r\n    /** 卸载没有使用的资源 */\r\n    DestroyUnusedAssets(): void \r\n    {\r\n        this.assetReferenceMap.forEach((referenceCount, assetPath)=>\r\n        {\r\n            if(referenceCount <= 0 && this.assetMap.has(assetPath))\r\n            {\r\n                var assetData = this.assetMap.get(assetPath);\r\n                this.assetMap.delete(assetPath);\r\n                let assetName = this.manifest.GetAssetNameByPath(assetPath);\r\n                let zipPath = this.manifest.GetAssetZipPath(assetName);\r\n                // console.log(\"ZipManager.DestroyUnusedAssets 清理资源\", assetPath);\r\n                this.RemoveZipUseAsset(zipPath, assetPath);\r\n            }\r\n        });\r\n        this.DestroyUnusedZip();\r\n    }\r\n    \r\n    \r\n    /** 卸载没有使用的Zip */\r\n    DestroyUnusedZip(): void \r\n    {\r\n        this.zipUseAssetMap.forEach((infoMap, zipPath)=>\r\n        {\r\n            if(infoMap.size == 0)\r\n            {\r\n                // console.log(\"ZipManager.DestroyUnusedZip 清理Zip\", zipPath);\r\n                if(this.zipMap.has(zipPath))\r\n                {\r\n                    var zip = this.zipMap.get(zipPath);\r\n                    this.zipMap.delete(zipPath);\r\n                }\r\n                \r\n            }\r\n        });\r\n\t}\r\n\r\n\r\n\r\n\r\n    PrintAssetReferenceMap()\r\n    {\r\n        this.assetReferenceMap.forEach((count, assetName)=>\r\n        {\r\n            console.log(assetName, count);\r\n        });\r\n    }\r\n\r\n    HasZip(zipPath:string):boolean\r\n    {\r\n        return this.zipMap.has(zipPath);\r\n    }\r\n    \r\n    HasAsset(assetUrl:string):boolean\r\n    {\r\n        let assetPath = this.AssetUrlToPath(assetUrl);\r\n        return this.assetMap.has(assetPath);\r\n    }\r\n\r\n    /** 获取资源所在Zip路径 */\r\n    GetAssetZipPathByAssetUrl(assetUrl:string):string\r\n    {\r\n        let assetName = this.AssetUrlToName(assetUrl);\r\n        let zipPath = this.manifest.GetAssetZipPath(assetName);\r\n        return zipPath;\r\n\r\n    }\r\n\r\n    /** 资源Url 转 路径 */\r\n    AssetUrlToPath(url:string): string\r\n    {\r\n        if(window['AssetUrlCache'])\r\n        {\r\n            var path = AssetUrlCache.GetPath(url);\r\n            if(path)\r\n            {\r\n                return path;\r\n            }\r\n        }\r\n        let verPath = url.replace(Laya.URL.basePath, \"\");\r\n        if(this.resourceVersionManifestReverse.has(verPath))\r\n        {\r\n            return this.resourceVersionManifestReverse.get(verPath);\r\n        }\r\n        else\r\n        {\r\n            return verPath;\r\n        }\r\n    }\r\n    /** 资源Url 转 资源名称 */\r\n    AssetUrlToName(url:string): string\r\n    {\r\n        let assetPath = this.AssetUrlToPath(url);\r\n        let assetName = this.manifest.GetAssetNameByPath(assetPath);\r\n        return assetName;\r\n    }\r\n\r\n    /** 资源名称转资源路径 */\r\n    AssetNameToPath(assetName:string): string\r\n    {\r\n        return this.manifest.srcRootPath + assetName;\r\n    }\r\n\r\n    /** 资源ID转资源路径 */\r\n    ResFileNameToAssetPath(resId:string): string\r\n    {\r\n        return this.manifest.srcRootPath + resId + \".lh\";\r\n    }\r\n\r\n    /** 资源路径列表 转 资源名称列表 */\r\n    AssetPathListToAssetNameList(assetPathList:string[]):string[]\r\n    {\r\n        let assetNameList:string[] = [];\r\n        for(let assetPath of assetPathList)\r\n        {\r\n            let assetName = this.manifest.GetAssetNameByPath(assetPath);\r\n            assetNameList.push(assetName);\r\n        }\r\n\r\n        return assetNameList;\r\n    }\r\n\r\n\r\n\r\n    \r\n    /** 获取Zip */\r\n    public GetZip(zipPath:string, callback: Handler)\r\n    {\r\n        var zip:JSZip;\r\n        if(this.zipMap.has(zipPath))\r\n        {\r\n            zip = this.zipMap.get(zipPath);\r\n            callback.runWith(zip);\r\n        }\r\n        else\r\n        {\r\n            \r\n            WaitCallbackList.Add(zipPath, callback);\r\n            if(WaitCallbackList.Get(zipPath).list.length == 1)\r\n            {\r\n                JsZipAsync.loadPath(zipPath, Laya.Loader.BUFFER, Handler.create(this, (zip)=>\r\n                {\r\n                    if(zip)\r\n                    {\r\n                        this.zipMap.set(zipPath, zip);\r\n                    }\r\n                    WaitCallbackList.RunWith(zipPath, zip);\r\n                }));\r\n            }\r\n        }\r\n    }\r\n\r\n    /** 获取Zip是否存在该资源 */\r\n    HasManifestAssetByUrl(url:string)\r\n    {\r\n        var assetPath:string = this.AssetUrlToPath(url);\r\n        return this.manifest.HasAssetByPath(assetPath);\r\n    }\r\n\r\n    \r\n    loadImageCount = 0;\r\n    /** 获取资源内容， 如果没有缓存资源就返回null */\r\n    public GetAssetData(url:string): any\r\n    {\r\n        var assetPath:string = this.AssetUrlToPath(url);\r\n        if(!this.manifest.HasAssetByPath(assetPath))\r\n        {\r\n            return null;\r\n        }\r\n        var data:any;\r\n        \r\n        let type = this.manifest.GetEnumZipAssetDataType(assetPath);\r\n        if(type == EnumZipAssetDataType.base64)\r\n        {\r\n            this.loadImageCount ++;\r\n            // console.log(this.loadImageCount, assetPath);\r\n        }\r\n\r\n        if(this.assetMap.has(assetPath))\r\n        {\r\n            data = this.assetMap.get(assetPath);\r\n            this.AddAssetReference(assetPath);\r\n        }\r\n       \r\n        return data;\r\n    }\r\n\r\n\r\n    /** 获取资源内容 */\r\n    public GetOrLoadAssetData(url:string, callback: Handler)\r\n    {\r\n        var assetPath:string = this.AssetUrlToPath(url);\r\n        if(!this.manifest.HasAssetByPath(assetPath))\r\n        {\r\n            callback.runWith(null);\r\n            return;\r\n        }\r\n        \r\n        var data:any;\r\n        \r\n        let type = this.manifest.GetEnumZipAssetDataType(assetPath);\r\n        if(type == EnumZipAssetDataType.base64)\r\n        {\r\n            this.loadImageCount ++;\r\n            // console.log(this.loadImageCount, assetPath);\r\n        }\r\n\r\n        if(this.assetMap.has(assetPath))\r\n        {\r\n            data = this.assetMap.get(assetPath);\r\n            this.AddAssetReference(assetPath);\r\n            callback.runWith(data);\r\n        }\r\n        else\r\n        {\r\n            WaitCallbackList.Add(url, callback);\r\n            if(WaitCallbackList.Get(url).list.length == 1)\r\n            {\r\n                this.LoadAssetData(assetPath, Handler.create(this, (data)=>\r\n                {\r\n                    var assetReferenceCount = this.GetAssetReference(assetPath);\r\n                    if(assetReferenceCount > 0)\r\n                    {\r\n                        console.error(\"ZipManager.GetAssetDataAsync 已经存在创建的资源了\", assetPath, assetReferenceCount);\r\n                    }\r\n                    this.AddAssetReference(assetPath);\r\n                    this.assetMap.set(assetPath, data);\r\n                    WaitCallbackList.RunWith(url, data);\r\n                }));\r\n            }\r\n        }\r\n    }\r\n    \r\n\r\n    imageCount = 0;\r\n\r\n    \r\n    /** 加载资源内容 */\r\n    private LoadAssetData(assetPath:string, callback: Handler)\r\n    {\r\n        let assetName = this.manifest.GetAssetNameByPath(assetPath);\r\n        \r\n\r\n        let zipPath = this.manifest.GetAssetZipPath(assetName);\r\n        let type = this.manifest.GetEnumZipAssetDataType(assetName);\r\n\r\n        this.GetZip(zipPath, Handler.create(this, (zip: JSZip)=>\r\n        {\r\n            if(!zip)\r\n            {\r\n                console.log(\"没有Zip\", zipPath, assetPath);\r\n                callback.runWith(null);\r\n                return;\r\n            }\r\n            \r\n\r\n            JsZipAsync.read(zip, assetName, type, Handler.create(this, (data)=>\r\n            {\r\n                if(data == null)\r\n                {\r\n                    console.log(\"zip读取资源失败\", zipPath, assetPath);\r\n                    callback.runWith(null);\r\n                    return;\r\n                }\r\n                    \r\n                switch(type)\r\n                {\r\n                    case EnumZipAssetDataType.string:\r\n                        data = JSON.parse(data);\r\n                        break;\r\n                    case EnumZipAssetDataType.base64:\r\n                        data = \"data:image/png;base64,\" + data;\r\n                        this.imageCount ++;\r\n                        break;\r\n                }\r\n                this.AddZipUseAsset(zipPath, assetPath);\r\n                callback.runWith(data);\r\n            }))\r\n\r\n        }));\r\n    }\r\n    \r\n    \r\n\r\n    /** 加载资源用到的所有Zip */\r\n    public async LoadAssetZipListAsync(assetPathList: string[], callbacker?:any, onProgerss?:((i, count, rate, path)=>any))\r\n    {\r\n        let assetNameList:string[] = this.AssetPathListToAssetNameList(assetPathList);\r\n\r\n        \r\n        var progerssFun = (i, len, path)=>\r\n        {\r\n            if(onProgerss)\r\n            {\r\n                if(callbacker)\r\n                {\r\n                    onProgerss.call(callbacker, i, len, Math.ceil(i / len * 100), path);\r\n                }\r\n                else\r\n                {\r\n                    onProgerss(i, len, Math.ceil(i / len * 100), path);\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        let zipPathList = this.manifest.GetAssetListDependencieZipPathList(assetNameList);\r\n\r\n        \r\n        return new Promise<any>((resolve)=>\r\n        {\r\n            progerssFun(0, zipPathList.length, \"\");\r\n            var loadNum = 0;\r\n            var loadTotal = zipPathList.length;\r\n            if(loadTotal == 0)\r\n            {\r\n                AsyncUtil.ResolveDelayCall(resolve);\r\n                return;\r\n            }\r\n\r\n            for(let i = 0, len = zipPathList.length; i < len; i ++)\r\n            {\r\n                let zipPath = zipPathList[i];\r\n\r\n                if(this.zipMap.has(zipPath))\r\n                {\r\n                    loadNum ++;\r\n                    progerssFun(loadNum, loadTotal, zipPath);\r\n                    if(loadNum >= loadTotal)\r\n                    {\r\n                        AsyncUtil.ResolveDelayCall(resolve);\r\n                    }\r\n                    continue;\r\n                }\r\n                else\r\n                {\r\n                    JsZipAsync.loadPath(zipPath, Laya.Loader.BUFFER, Handler.create(this, (zip)=>\r\n                    {\r\n                        this.zipMap.set(zipPath, zip);\r\n                        loadNum ++;\r\n                        progerssFun(loadNum, loadTotal, zipPath);\r\n                        if(loadNum >= loadTotal)\r\n                        {\r\n                            resolve();\r\n                            // ZipManager.ResolveDelayCall(resolve);\r\n                        }\r\n                    }));\r\n\r\n                }\r\n\r\n                \r\n            }\r\n        });\r\n    }\r\n\r\n    /** 读取所有Zip里面的资源 */\r\n    public async ReadAllZipAsync(callbacker?:any, onProgerss?:((i, count, rate, path)=>any), onSubProgerss?:((i, count, rate, path)=>any))\r\n    {\r\n        \r\n        return new Promise<any>((resolve)=>\r\n        {\r\n            let zipPathList: string[] = [];\r\n            this.zipMap.forEach((zip, zipPath)=>{\r\n                zipPathList.push(zipPath);\r\n            });\r\n\r\n            var progerssFun = (i, len, path)=>\r\n            {\r\n                if(onProgerss)\r\n                {\r\n                    if(callbacker)\r\n                    {\r\n                        onProgerss.call(callbacker, i, len, Math.ceil(i / len * 100), path);\r\n                    }\r\n                    else\r\n                    {\r\n                        onProgerss(i, len, Math.ceil(i / len * 100), path);\r\n                    }\r\n                }\r\n            }\r\n            \r\n            var subProgerssFun = (i, len, path)=>\r\n            {\r\n                if(onSubProgerss)\r\n                {\r\n                    if(callbacker)\r\n                    {\r\n                        onSubProgerss.call(callbacker, i, len, Math.ceil(i / len * 100), path);\r\n                    }\r\n                    else\r\n                    {\r\n                        onSubProgerss(i, len, Math.ceil(i / len * 100), path);\r\n                    }\r\n                }\r\n            }\r\n\r\n            progerssFun(0, zipPathList.length, \"\");\r\n\r\n            var assetNameTotal = 0;\r\n            var assetNameLoadedCount = 0;\r\n            var zipAssetNameListMap:Map<string, string[]> = new Map<string, string[]>();\r\n            for(let i = 0, len = zipPathList.length; i < len; i ++)\r\n            {\r\n                let zipPath = zipPathList[i];\r\n                let zip = this.zipMap.get(zipPath);\r\n\r\n\r\n\r\n                let assetNameList:string[] = [];\r\n\r\n                for(let assetName in zip.files)\r\n                {\r\n                    let fileObject:JSZip.JSZipObject = zip.files[assetName];\r\n                    if(!fileObject.dir)\r\n                    {\r\n                        let assetPath = this.AssetNameToPath(assetName);\r\n                        if(this.assetMap.has(assetPath))\r\n                        {\r\n                            continue;\r\n                        }\r\n\r\n                        assetNameList.push(assetName);\r\n                        assetNameTotal ++;\r\n                    }\r\n                }\r\n\r\n                zipAssetNameListMap.set(zipPath, assetNameList);\r\n            }\r\n\r\n            console.log(\"assetNameTotal=\", assetNameTotal);\r\n            if(assetNameTotal == 0)\r\n            {\r\n                AsyncUtil.ResolveDelayCall(resolve);\r\n                return;\r\n            }\r\n\r\n\r\n                \r\n\r\n            for(let i = 0, len = zipPathList.length; i < len; i ++)\r\n            {\r\n                let zipPath = zipPathList[i];\r\n                let zip = this.zipMap.get(zipPath);\r\n\r\n                let assetNameList:string[] = zipAssetNameListMap.get(zipPath);\r\n                subProgerssFun(0, assetNameList.length, \"\");\r\n                for(let j = 0, jLen = assetNameList.length; j < jLen; j ++)\r\n                {\r\n                    let assetName = assetNameList[j];\r\n                    let assetPath = this.AssetNameToPath(assetName);\r\n                    let type = this.manifest.GetEnumZipAssetDataType(assetName);\r\n\r\n                    JsZipAsync.read(zip, assetName, type, Handler.create(this, (data)=>{\r\n\r\n                        assetNameLoadedCount ++;\r\n                        if(data)\r\n                        {\r\n                            switch(type)\r\n                            {\r\n                                case EnumZipAssetDataType.string:\r\n                                    data = JSON.parse(data);\r\n                                    break;\r\n                                case EnumZipAssetDataType.base64:\r\n                                    data = \"data:image/png;base64,\" + data;\r\n                                    this.imageCount ++;\r\n                                    break;\r\n                            }\r\n                        }\r\n                        var assetReferenceCount = this.GetAssetReference(assetPath);\r\n                        if(assetReferenceCount > 0)\r\n                        {\r\n                            console.error(\"ZipManager.ReadAllZipAsync asset 已经存在创建的资源了\", assetPath, assetReferenceCount);\r\n                        }\r\n                        this.assetMap.set(assetPath, data);\r\n\r\n                        progerssFun(assetNameLoadedCount, assetNameTotal, zipPath);\r\n                        subProgerssFun(j, jLen, assetName);\r\n\r\n                        if(assetNameLoadedCount >= assetNameTotal)\r\n                        {\r\n                            AsyncUtil.ResolveDelayCall(resolve);\r\n                        }\r\n                    }));\r\n                    \r\n                }\r\n\r\n\r\n\r\n\r\n\r\n            }\r\n        \r\n\t\t});\r\n        \r\n    }\r\n\r\n\r\n    /** 获取Zip */\r\n    public async GetZipAsync(zipPath:string): Promise<JSZip>\r\n    {\r\n        return new Promise<JSZip>((resolve)=>{\r\n            this.GetZip(zipPath, Handler.create(this, (zip)=>{\r\n                resolve(zip);\r\n            }))\r\n        });\r\n    }\r\n\r\n\r\n    \r\n    /** 获取资源内容 */\r\n    public async GetOrLoadAssetDataAsync(url:string): Promise<any>\r\n    {\r\n        return new Promise<JSZip>((resolve)=>{\r\n            this.GetOrLoadAssetData(url, Handler.create(this, (data)=>{\r\n                resolve(data);\r\n            }));\r\n        });\r\n    }\r\n\r\n}\r\n\r\nwindow['ZipManager'] = ZipManager;","import DebugResources from \"./DebugResources\";\r\n\r\nexport default class DebugLoader \r\n{\r\n    static InitCode()\r\n    {\r\n        new DebugLoader().InitCode();\r\n    }\r\n    \r\n    private InitCode()\r\n    {\r\n        var Loader: any = Laya.Loader;\r\n\r\n        Loader.prototype.src_load = Loader.prototype.load;\r\n        Loader.prototype.load = this.load;\r\n        \r\n        \r\n        Loader.prototype.src_onLoaded = Loader.prototype.onLoaded;\r\n        Loader.prototype.onLoaded = this.onLoaded;\r\n\r\n        \r\n        Loader.prototype.src_endLoad = Loader.prototype.endLoad;\r\n        Loader.prototype.endLoad = this.endLoad;\r\n\r\n        \r\n        \r\n        Loader.prototype.src_onError = Loader.prototype.onError;\r\n        Loader.prototype.onError = this.onError;\r\n        \r\n\r\n    }\r\n    \r\n    url:string;\r\n\r\n    \r\n    src_onError(message) \r\n    {\r\n    }\r\n\r\n    onError(message) \r\n    {\r\n        DebugResources.onLoadError(this.url);\r\n        this.src_onError(message);\r\n    }\r\n\r\n\r\n    src_endLoad(content: any = null): void \r\n    {\r\n    }\r\n    \r\n    endLoad(content: any = null): void \r\n    {\r\n        DebugResources.onLoadEnd(this.url);\r\n        this.src_endLoad(content);\r\n    }\r\n\r\n\r\n    \r\n    src_onLoaded(data: any = null): void \r\n    {\r\n    }\r\n\r\n    \r\n    onLoaded(data: any = null): void \r\n    {\r\n        DebugResources.onLoaded(this.url, data);\r\n        this.src_onLoaded(data);\r\n    }\r\n\r\n\r\n\r\n\r\n    src_load(url: string, type: string | null = null, cache: boolean = true, group: string | null = null, ignoreCache: boolean = false, useWorkerLoader: boolean = Laya.WorkerLoader.enable): void \r\n    {\r\n    }\r\n\r\n    load(url: string, type: string | null = null, cache: boolean = true, group: string | null = null, ignoreCache: boolean = false, useWorkerLoader: boolean = Laya.WorkerLoader.enable): void \r\n    {\r\n        DebugResources.onLoadBegin(url);\r\n        this.src_load(url, type, cache, group, ignoreCache, useWorkerLoader);\r\n    }\r\n\r\n\r\n\r\n}","import DebugResources from \"./DebugResources\";\r\n\r\nexport default class DebugLoaderManager \r\n{\r\n    static InitCode()\r\n    {\r\n        new DebugLoaderManager().InitCode();\r\n    }\r\n    \r\n    private InitCode()\r\n    {\r\n        var LoaderManager: any = Laya.LoaderManager;\r\n\r\n        LoaderManager.prototype.src_createOne = LoaderManager.prototype._createOne;\r\n        LoaderManager.prototype._createOne = this._createOne;\r\n        \r\n        \r\n        LoaderManager.prototype.src_create = LoaderManager.prototype._create;\r\n        LoaderManager.prototype._create = this._create;\r\n        \r\n\r\n    }\r\n    \r\n    url:string;\r\n\r\n    \r\n    private src_createOne(url: string, mainResou: boolean, complete: Handler|null = null, progress: Handler|null = null, type: string|null = null, constructParams: any[]|null = null, propertyParams: any = null, priority: number = 1, cache: boolean = true): void\r\n    {\r\n\r\n    }\r\n    private _createOne(url: string, mainResou: boolean, complete: Handler|null = null, progress: Handler|null = null, type: string|null = null, constructParams: any[]|null = null, propertyParams: any = null, priority: number = 1, cache: boolean = true): void\r\n    {\r\n        DebugResources.onCreateOnceBegin(url);\r\n        var myComplete = Handler.create(this, (res)=>{\r\n            if(complete)\r\n            {\r\n                DebugResources.onCreateOnceEnd(url, res);\r\n                complete.runWith(res);\r\n            }\r\n        })\r\n        this.src_createOne(url, mainResou, myComplete, progress, type, constructParams, propertyParams, priority, cache);\r\n    }\r\n\r\n    \r\n    src_create(url: any, mainResou: boolean, complete: Handler|null = null, progress: Handler|null = null, type: string|null = null, constructParams: any[]|null = null, propertyParams: any = null, priority: number = 1, cache: boolean = true): void \r\n    {\r\n        \r\n    }\r\n\r\n    _create(url: any, mainResou: boolean, complete: Handler|null = null, progress: Handler|null = null, type: string|null = null, constructParams: any[]|null = null, propertyParams: any = null, priority: number = 1, cache: boolean = true): void \r\n    {\r\n        DebugResources.onCreateBegin(url);\r\n        var myComplete = Handler.create(this, (res)=>{\r\n            if(complete)\r\n            {\r\n                DebugResources.onCreateEnd(url);\r\n                complete.runWith(res);\r\n            }\r\n        })\r\n        this.src_create(url, mainResou, myComplete, progress, type, constructParams, propertyParams, priority, cache);\r\n    }\r\n\r\n\r\n\r\n}","import DebugResources from \"./DebugResources\";\r\n\r\nexport default class DebugLaya3D\r\n{\r\n    static InitCode()\r\n    {\r\n        new DebugLaya3D().InitCode();\r\n    }\r\n    \r\n    private InitCode()\r\n    {\r\n        \r\n        \r\n        var _Laya3D: any = Laya3D;\r\n\r\n        _Laya3D.src_endLoad = _Laya3D._endLoad;\r\n        _Laya3D._endLoad = this._endLoad;\r\n\r\n    }\r\n    \r\n\r\n    \r\n    private src_endLoad(loader: Loader, content: any = null, subResous: any[] = null): void\r\n    {\r\n\r\n    }\r\n\r\n    private _endLoad(loader: Loader, content: any = null, subResous: any[] = null): void\r\n    {\r\n        DebugResources.onLaya3DEnd(loader.url, content);\r\n        this.src_endLoad(loader, content, subResous);\r\n    }\r\n\r\n\r\n\r\n}","import DebugLoader from \"./DebugLoader\";\r\nimport DebugLoaderManager from \"./DebugLoaderManager\";\r\nimport ZipManager from \"../Zip/ZipManager\";\r\nimport DebugLaya3D from \"./DebugLaya3D\";\r\n\r\nenum DebugLoaderState\r\n{\r\n    Begin = \"Begin\",\r\n    LoadedSucess = \"LoadedSucess\",\r\n    LoadedFail = \"LoadedFail\",\r\n}\r\n\r\nexport default class DebugResources\r\n{\r\n    static enable: boolean = false;\r\n\r\n    static Init()\r\n    {\r\n        this.enable = true;\r\n        DebugLoader.InitCode();\r\n        DebugLoaderManager.InitCode();\r\n        DebugLaya3D.InitCode();\r\n    }\r\n\r\n    static stateMap:Map<string, DebugLoaderState> = new Map<string, DebugLoaderState>();\r\n    static loadBeginNumMap:Map<string, any> = new Map<string, any>();\r\n    static loadedNumMap:Map<string, any> = new Map<string, any>();\r\n    static loadEndNumMap:Map<string, any> = new Map<string, any>();\r\n    static loadErrorNumMap:Map<string, any> = new Map<string, any>();\r\n\r\n    \r\n    static prefabStateMap:Map<string, DebugLoaderState> = new Map<string, DebugLoaderState>();\r\n    static prefabBeginNumMap:Map<string, any> = new Map<string, any>();\r\n    static prefabEndNumMap:Map<string, any> = new Map<string, any>();\r\n\r\n    static createrOnceResMap:Map<string, any> = new Map<string, any>();\r\n    static createrOnceStateMap:Map<string, DebugLoaderState> = new Map<string, DebugLoaderState>();\r\n    static createOnceBeginNumMap:Map<string, any> = new Map<string, any>();\r\n    static createOnceEndNumMap:Map<string, any> = new Map<string, any>();\r\n    \r\n\r\n    static createrStateMap:Map<string, DebugLoaderState> = new Map<string, DebugLoaderState>();\r\n    static createeBeginNumMap:Map<string, any> = new Map<string, any>();\r\n    static createEndNumMap:Map<string, any> = new Map<string, any>();\r\n\r\n\r\n    \r\n    static laya3dStateMap:Map<string, DebugLoaderState> = new Map<string, DebugLoaderState>();\r\n    static laya3dBeginNumMap:Map<string, any> = new Map<string, any>();\r\n    static laya3dEndNumMap:Map<string, any> = new Map<string, any>();\r\n\r\n    \r\n    static onLaya3DBegin(url:string)\r\n    {\r\n        this.laya3dStateMap.set(url, DebugLoaderState.Begin);\r\n        var num = 0;\r\n        if(this.laya3dBeginNumMap.has(url))\r\n        {\r\n            num = this.laya3dBeginNumMap.get(url);\r\n        }\r\n        this.laya3dBeginNumMap.set(url, num + 1);\r\n    }\r\n\r\n    \r\n    static onLaya3DEnd(url:string, res:any)\r\n    {\r\n        this.laya3dStateMap.set(url, res ? DebugLoaderState.LoadedSucess : DebugLoaderState.LoadedFail);\r\n        var num = 0;\r\n        if(this.laya3dEndNumMap.has(url))\r\n        {\r\n            num = this.laya3dEndNumMap.get(url);\r\n        }\r\n        this.laya3dEndNumMap.set(url, num + 1);\r\n    }\r\n\r\n\r\n    static onCreateOnceBegin(url:string)\r\n    {\r\n        this.createrOnceStateMap.set(url, DebugLoaderState.Begin);\r\n        var num = 0;\r\n        if(this.createOnceBeginNumMap.has(url))\r\n        {\r\n            num = this.createOnceBeginNumMap.get(url);\r\n        }\r\n        this.createOnceBeginNumMap.set(url, num + 1);\r\n    }\r\n\r\n    \r\n    static onCreateOnceEnd(url:string, res:any)\r\n    {\r\n        this.createrOnceResMap.set(url, res);\r\n        this.createrOnceStateMap.set(url, res ? DebugLoaderState.LoadedSucess : DebugLoaderState.LoadedFail);\r\n        var num = 0;\r\n        if(this.createOnceEndNumMap.has(url))\r\n        {\r\n            num = this.createOnceEndNumMap.get(url);\r\n        }\r\n        this.createOnceEndNumMap.set(url, num + 1);\r\n    }\r\n\r\n\r\n\r\n    static onCreateBegin(url:string)\r\n    {\r\n        this.createrStateMap.set(url, DebugLoaderState.Begin);\r\n        var num = 0;\r\n        if(this.createeBeginNumMap.has(url))\r\n        {\r\n            num = this.createeBeginNumMap.get(url);\r\n        }\r\n        this.createeBeginNumMap.set(url, num + 1);\r\n    }\r\n\r\n    \r\n    static onCreateEnd(url:string)\r\n    {\r\n        this.createrStateMap.set(url, DebugLoaderState.LoadedSucess);\r\n        var num = 0;\r\n        if(this.createEndNumMap.has(url))\r\n        {\r\n            num = this.createEndNumMap.get(url);\r\n        }\r\n        this.createEndNumMap.set(url, num + 1);\r\n    }\r\n\r\n\r\n\r\n    \r\n    static onPrefabBegin(url:string)\r\n    {\r\n        if(!this.enable)\r\n            return;\r\n        this.prefabStateMap.set(url, DebugLoaderState.Begin);\r\n        var num = 0;\r\n        if(this.prefabBeginNumMap.has(url))\r\n        {\r\n            num = this.prefabBeginNumMap.get(url);\r\n        }\r\n        this.prefabBeginNumMap.set(url, num + 1);\r\n    }\r\n\r\n    \r\n    static onPrefabEnd(url:string)\r\n    {\r\n        if(!this.enable)\r\n            return;\r\n        this.prefabStateMap.set(url, DebugLoaderState.LoadedSucess);\r\n        var num = 0;\r\n        if(this.prefabEndNumMap.has(url))\r\n        {\r\n            num = this.prefabEndNumMap.get(url);\r\n        }\r\n        this.prefabEndNumMap.set(url, num + 1);\r\n    }\r\n\r\n    static onLoadBegin(url:string)\r\n    {\r\n        this.stateMap.set(url, DebugLoaderState.Begin);\r\n\r\n        var num = 0;\r\n        if(this.loadBeginNumMap.has(url))\r\n        {\r\n            num = this.loadBeginNumMap.get(url);\r\n        }\r\n        this.loadBeginNumMap.set(url, num + 1);\r\n    }\r\n\r\n    static onLoaded(url:string, data:any)\r\n    {\r\n        if(url == \"res/res3dzip/Hero_0001_LongQi_Skin1.zip\")\r\n        {\r\n            console.log(1);\r\n        }\r\n\r\n        if(data)\r\n        {\r\n            this.stateMap.set(url, DebugLoaderState.LoadedSucess);\r\n        }\r\n        else\r\n        {\r\n            this.stateMap.set(url, DebugLoaderState.LoadedFail);\r\n        }\r\n\r\n        \r\n        var num = 0;\r\n        if(this.loadedNumMap.has(url))\r\n        {\r\n            num = this.loadedNumMap.get(url);\r\n        }\r\n        this.loadedNumMap.set(url, num + 1);\r\n    }\r\n    \r\n    static onLoadEnd(url:string)\r\n    {\r\n        if(url == \"res/res3dzip/Hero_0001_LongQi_Skin1.zip\")\r\n        {\r\n            console.log(1);\r\n        }\r\n\r\n        var num = 0;\r\n        if(this.loadEndNumMap.has(url))\r\n        {\r\n            num = this.loadEndNumMap.get(url);\r\n        }\r\n        this.loadEndNumMap.set(url, num + 1);\r\n\r\n    }\r\n\r\n    \r\n    static onLoadError(url:string)\r\n    {\r\n        var num = 0;\r\n        if(this.loadErrorNumMap.has(url))\r\n        {\r\n            num = this.loadErrorNumMap.get(url);\r\n        }\r\n        this.loadErrorNumMap.set(url, num + 1);\r\n\r\n    }\r\n\r\n\r\n\r\n    static GetInfo(url:string)\r\n    {\r\n        return `Loader: ${this.stateMap.get(url)},  beginNum=${this.loadBeginNumMap.get(url)},  loadedNum=${this.loadedNumMap.get(url)},  endNum=${this.loadEndNumMap.get(url)}, ErrorNum=${this.loadErrorNumMap.get(url)},  ${url}`;\r\n    }\r\n\r\n    \r\n    static GetPrefabInfo(url:string)\r\n    {\r\n        return `Prefab: ${this.prefabStateMap.get(url)},  beginNum=${this.prefabBeginNumMap.get(url)},  endNum=${this.prefabEndNumMap.get(url)},  ${url}`;\r\n    }\r\n    \r\n    static GetCreateOnceInfo(url:string)\r\n    {\r\n        return `CreateOnce: ${this.createrOnceStateMap.get(url)},  beginNum=${this.createOnceBeginNumMap.get(url)},  endNum=${this.createOnceEndNumMap.get(url)},  ${url}`;\r\n    }\r\n    \r\n    static GetCreateInfo(url:string)\r\n    {\r\n        return `Create: ${this.createrStateMap.get(url)},  beginNum=${this.createeBeginNumMap.get(url)},  endNum=${this.createEndNumMap.get(url)},  ${url}`;\r\n    }\r\n\r\n    \r\n    static PrintPrefabAssetsInfo(url:string)\r\n    {\r\n        if(!ZipManager.Instance.manifest)\r\n        {\r\n            console.warn(\"没有ZipManager.Instance.manifest\");\r\n            return;\r\n        }\r\n        console.log(\"CheckPrefab:\", url);\r\n        let prefabAssetName = ZipManager.Instance.AssetUrlToName(url);\r\n        let dependenciePathList = ZipManager.Instance.manifest.GetAssetDependenciePathList(prefabAssetName);\r\n        for(let itemAssetPath of dependenciePathList)\r\n        {\r\n            let state =  this.createrOnceStateMap.get(itemAssetPath);\r\n            let state2 =  this.laya3dStateMap.get(itemAssetPath);\r\n            let info = `${state}, laya3dState=${state2},  createOnceBeginNumMap=${this.createOnceBeginNumMap.get(itemAssetPath)},  createOnceEndNumMap=${this.createOnceEndNumMap.get(itemAssetPath)}, ${itemAssetPath}, ${this.createrOnceResMap.get(itemAssetPath)}`;\r\n            if(state != DebugLoaderState.LoadedSucess || state2 != DebugLoaderState.LoadedSucess )\r\n            {\r\n                console.warn(info);\r\n            }\r\n            else\r\n            {\r\n                console.log(info);\r\n            }\r\n        }\r\n    }\r\n\r\n    static Check()\r\n    {\r\n        this.CheckNoLoaded();\r\n    }\r\n\r\n    /** 检测没有加载完成的 */\r\n    static CheckNoLoaded()\r\n    {\r\n        console.log(\"CheckNoLoaded\");\r\n        this.stateMap.forEach((state, url)=>{\r\n            if(state != DebugLoaderState.LoadedSucess)\r\n            {\r\n                console.warn(this.GetInfo(url));\r\n            }\r\n        });\r\n\r\n        this.loadErrorNumMap.forEach((state, url)=>{\r\n            \r\n            console.error(this.GetInfo(url));\r\n        });\r\n\r\n        this.prefabStateMap.forEach((state, url)=>{\r\n            if(state != DebugLoaderState.LoadedSucess)\r\n            {\r\n                console.warn(this.GetPrefabInfo(url));\r\n            }\r\n        });\r\n\r\n        \r\n        this.createrOnceStateMap.forEach((state, url)=>{\r\n            if(state != DebugLoaderState.LoadedSucess)\r\n            {\r\n                console.warn(this.GetCreateOnceInfo(url));\r\n            }\r\n        });\r\n\r\n        \r\n        this.createrStateMap.forEach((state, url)=>{\r\n            if(state != DebugLoaderState.LoadedSucess)\r\n            {\r\n                console.warn(this.GetCreateInfo(url));\r\n            }\r\n        });\r\n\r\n        console.log(\"检测预设哪个文件没加载完成\");\r\n        this.prefabStateMap.forEach((state, url)=>{\r\n            if(state != DebugLoaderState.LoadedSucess)\r\n            {\r\n                this.PrintPrefabAssetsInfo(url)\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n}\r\n\r\nwindow['DebugResources'] = DebugResources;","import AsyncUtil from \"./AsyncUtil\";\r\nimport ZipManager from \"./ZipManager\";\r\nimport Handler = Laya.Handler;\r\nimport FileTask from \"../HttpRequestRange/FileTask\";\r\n\r\nexport default class PreloadZipList\r\n{\r\n    zipPathList:string[];\r\n    assetPathList:string[] = [];\r\n    maxLoader = 2;\r\n    isStop: boolean = false;\r\n\r\n    total:int = 0;\r\n    loadIndex:int = 0;\r\n    unzipIndex:int = 0;\r\n\r\n    constructor(zipPathList:string[], assetPathList:string[])\r\n    {\r\n        this.zipPathList = zipPathList;\r\n        this.assetPathList = assetPathList;\r\n        this.loadIndex = 0;\r\n        this.unzipIndex = 0;\r\n        this.total = zipPathList.length;\r\n        this.maxLoader = Laya.loader.maxLoader - 1;\r\n        this.maxLoader = Math.max(this.maxLoader, 2);\r\n    }\r\n\r\n    get IsWait(): boolean\r\n    {\r\n        return Laya.loader._loaderCount >= this.maxLoader;\r\n    }\r\n\r\n    \r\n    async StartAsync()\r\n    {\r\n        this.isStop = false;\r\n        await this.LoadListAsync();\r\n        await this.UnzipListAsync();\r\n    }\r\n\r\n    Start(completeHandler?: Handler, progressHandler?: Handler)\r\n    {\r\n        if(this.total == 0)\r\n        {\r\n            if(completeHandler) completeHandler.run();\r\n            return;\r\n        }\r\n        let time = Laya.timer.currTimer;\r\n        this.LoadList(\r\n            Handler.create(this, ()=>\r\n            {\r\n                console.log(\"加载Zip完成\", Laya.timer.currTimer-time);\r\n                let time2 = Laya.timer.currTimer;\r\n                this.LoadZipList(Handler.create(this, ()=>\r\n                {\r\n                    console.log(\"装载Zip完成\", Laya.timer.currTimer-time2);\r\n                    let time3 = Laya.timer.currTimer;\r\n                    this.UnzipList(Handler.create(this, ()=>\r\n                    {\r\n                        console.log(\"解压zip完成\", Laya.timer.currTimer-time3);\r\n                        console.log(\"加载总费时\", Laya.timer.currTimer-time);\r\n                        if(progressHandler) progressHandler.recover();\r\n                        if(completeHandler) completeHandler.run();\r\n                    }),\r\n                    Handler.create(this, (progress: number)=>\r\n                    {\r\n                        // 解压进度\r\n                        if(progressHandler) progressHandler.runWith(progress * 0.3 + 0.7);\r\n                    }, null, false));\r\n                }),\r\n                Handler.create(this, (progress: number)=>\r\n                {\r\n                    // 装载进度\r\n                    if(progressHandler) progressHandler.runWith(progress * 0.2 + 0.5);\r\n                }, null, false));\r\n\r\n\r\n            }),\r\n            Handler.create(this, (progress: number)=>\r\n            {\r\n                // 加载进度\r\n                if(progressHandler) progressHandler.runWith(progress * 0.5);\r\n            }, null, false)\r\n        )\r\n    }\r\n\r\n    Stop()\r\n    {\r\n        this.isStop = true;\r\n    }\r\n\r\n    \r\n    LoadList(completeHandler?: Handler, progressHandler?: Handler)\r\n    {\r\n        if(this.total == 0)\r\n        {\r\n            if(completeHandler) completeHandler.run();\r\n            return;\r\n        }\r\n\r\n        this.LoadList2(\r\n            Handler.create(this, (result: boolean)=>\r\n            {\r\n                if(result == false)\r\n                {\r\n                    Laya.timer.frameOnce(30, this, ()=>\r\n                    {\r\n                        this.LoadList(completeHandler);\r\n                    })\r\n                }\r\n                else\r\n                {\r\n                    if(progressHandler)\r\n                    {\r\n                        progressHandler.runWith(1);\r\n                        progressHandler.recover();\r\n                    }\r\n                    if(completeHandler) completeHandler.runWith(result);\r\n                }\r\n            })\r\n            ,progressHandler\r\n        );\r\n    }\r\n\r\n    private LoadList2(completeHandler?: Handler, progressHandler?: Handler)\r\n    {\r\n        FileTask.RequestList(this.zipPathList, completeHandler, progressHandler);\r\n        // Laya.loader.load(\r\n        //     this.zipPathList, \r\n        //     // complete\r\n        //     completeHandler,\r\n        //     // progress\r\n        //     progressHandler, \r\n        //     Laya.Loader.BUFFER\r\n        // );\r\n    }\r\n\r\n    private loadZipIndex: number = 0;\r\n    private loadedZipIndex: number = 0;\r\n    private loadZipOnceNum: number = 10;\r\n    LoadZipList(completeHandler?: Handler, progressHandler?: Handler)\r\n    {\r\n        if(this.total == 0)\r\n        {\r\n            if(completeHandler) completeHandler.run();\r\n            return;\r\n        }\r\n\r\n        var index = 0;\r\n        var len = this.zipPathList.length;\r\n        for(var i = 0;i < len; i ++)\r\n        {\r\n            ZipManager.Instance.GetZip(this.zipPathList[this.loadZipIndex], Handler.create(this, ()=>\r\n            {\r\n                index ++;\r\n                \r\n                if(progressHandler) progressHandler.runWith(index / this.total);\r\n                if(index >= this.total)\r\n                {\r\n                    if(progressHandler) progressHandler.recover();\r\n                    if(completeHandler) completeHandler.run();\r\n                }\r\n            }))\r\n\r\n        }\r\n\r\n\r\n        // this.LoadZipOnce(completeHandler, progressHandler);\r\n    }\r\n\r\n    private LoadZipOnce(completeHandler?: Handler, progressHandler?: Handler)\r\n    {\r\n        for(let i = 0; i < this.loadZipOnceNum; i ++)\r\n        {\r\n            ZipManager.Instance.GetZip(this.zipPathList[this.loadZipIndex], Handler.create(this, ()=>\r\n            {\r\n                this.loadedZipIndex ++;\r\n                \r\n                if(progressHandler) progressHandler.runWith(this.loadedZipIndex / this.total);\r\n                if(this.loadedZipIndex >= this.total)\r\n                {\r\n                    if(progressHandler) progressHandler.recover();\r\n                    if(completeHandler) completeHandler.run();\r\n                }\r\n            }))\r\n            this.loadZipIndex ++;\r\n            if(this.loadZipIndex >= this.total)\r\n            {\r\n                break;\r\n            }\r\n        }\r\n\r\n        if(this.loadZipIndex >= this.total)\r\n        {\r\n            return;\r\n        }\r\n\r\n        Laya.timer.frameOnce(1, this, this.LoadZipOnce, [completeHandler, progressHandler])\r\n    }\r\n\r\n    UnzipList(completeHandler?: Handler, progressHandler?: Handler)\r\n    {\r\n        var index = 0;\r\n        var len = this.assetPathList.length;\r\n        if(this.total == 0)\r\n        {\r\n            if(completeHandler) completeHandler.run();\r\n            return;\r\n        }\r\n        \r\n        for(let i = 0; i <  len; i ++)\r\n        {\r\n            let assetPath = this.assetPathList[i];\r\n            ZipManager.Instance.GetOrLoadAssetData(assetPath, Handler.create(this, ()=>{\r\n                index ++;\r\n                if(progressHandler) progressHandler.runWith(index / len);\r\n                if(index >= len)\r\n                {\r\n                    if(progressHandler) progressHandler.recover();\r\n                    if(completeHandler) completeHandler.run();\r\n                }\r\n            }));\r\n        }\r\n    }\r\n\r\n\r\n\r\n    async LoadListAsync()\r\n    {\r\n        if(this.total == 0)\r\n        {\r\n            return;\r\n        }\r\n        \r\n        while(this.loadIndex < this.total)\r\n        {\r\n            if(this.isStop)\r\n            {\r\n                break;\r\n            }\r\n            \r\n            if(this.IsWait)\r\n            {\r\n                await AsyncUtil.MAwitFrame();\r\n            }\r\n            \r\n            if(this.isStop)\r\n            {\r\n                break;\r\n            }\r\n\r\n            let zipPath = this.zipPathList[this.loadIndex];\r\n            // console.log(\"Preload Zip\", zipPath);\r\n            await ZipManager.Instance.GetZipAsync(zipPath);\r\n            this.loadIndex ++;\r\n            if(this.isStop)\r\n            {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    \r\n    async UnzipListAsync()\r\n    {\r\n        if(this.total == 0 || this.isStop)\r\n        {\r\n            return;\r\n        }\r\n\r\n        this.unzipIndex = 0;\r\n        this.total = this.assetPathList.length;\r\n        \r\n        let onceNum = 5;\r\n        while(this.unzipIndex < this.total)\r\n        {\r\n            if(this.isStop)\r\n            {\r\n                break;\r\n            }\r\n\r\n            for(let i = 0; i < onceNum; i ++)\r\n            {\r\n                if(this.unzipIndex >= this.total || this.isStop)\r\n                {\r\n                    break;\r\n                }\r\n                let assetPath = this.assetPathList[this.unzipIndex];\r\n                if(i < onceNum - 1)\r\n                {\r\n                    // console.log(\"Preload Read sync\", i, assetPath);\r\n                    ZipManager.Instance.GetOrLoadAssetDataAsync(assetPath)\r\n                }\r\n                else\r\n                {\r\n                    // console.log(\"Preload Read async\", i, assetPath);\r\n                    await ZipManager.Instance.GetOrLoadAssetDataAsync(assetPath)\r\n                }\r\n                this.unzipIndex ++;\r\n               \r\n            }\r\n\r\n            if(this.isStop)\r\n            {\r\n                break;\r\n            }\r\n            \r\n        }\r\n    }\r\n\r\n}","import AsyncUtil from \"./AsyncUtil\";\r\nimport ZipManager from \"./ZipManager\";\r\n\r\nexport default class PreloadAssetList\r\n{\r\n    assetPathList:string[];\r\n    maxLoader = 5;\r\n    isStop: boolean = false;\r\n\r\n    total:int = 0;\r\n    loadIndex:int = 0;\r\n\r\n    constructor(assetPathList:string[])\r\n    {\r\n        this.assetPathList = assetPathList;\r\n        this.loadIndex = 0;\r\n        this.total = assetPathList.length;\r\n        this.maxLoader = Laya.loader.maxLoader - 1;\r\n        this.maxLoader = Math.max(this.maxLoader, 2);\r\n    }\r\n\r\n    get IsWait(): boolean\r\n    {\r\n        return Laya.loader._loaderCount >= this.maxLoader;\r\n    }\r\n\r\n    \r\n    async StartAsync()\r\n    {\r\n        this.isStop = false;\r\n        await this.LoadListAsync();\r\n    }\r\n\r\n    Stop()\r\n    {\r\n        this.isStop = true;\r\n    }\r\n\r\n    \r\n    LoadList(completeHandler?: Handler, progressHandler?: Handler)\r\n    {\r\n        if(this.total == 0)\r\n        {\r\n            if(completeHandler) completeHandler.run();\r\n            return;\r\n        }\r\n        var time = Laya.timer.currTimer;\r\n        var loadedIndex = 0;\r\n        for(let i = 0; i < this.total; i ++)\r\n        {\r\n            let assetPath = this.assetPathList[i];\r\n            Laya.loader.create(assetPath, Laya.Handler.create(null, (res)=>\r\n            {\r\n                loadedIndex++;\r\n                if(progressHandler) progressHandler.runWith(loadedIndex / this.total);\r\n                if(loadedIndex >= this.total)\r\n                {\r\n                    console.log(\"加载预设完成\", Laya.timer.currTimer-time);\r\n                    if(completeHandler) completeHandler.run();\r\n                }\r\n            }));\r\n        }\r\n    }\r\n\r\n\r\n    async LoadListAsync()\r\n    {\r\n        if(this.total == 0)\r\n        {\r\n            return;\r\n        }\r\n        \r\n        let onceNum = 5;\r\n        \r\n        while(this.loadIndex < this.total)\r\n        {\r\n            \r\n            if(this.isStop)\r\n            {\r\n                break;\r\n            }\r\n\r\n            if(this.IsWait)\r\n            {\r\n                await AsyncUtil.MAwitFrame();\r\n            }\r\n            \r\n            if(this.isStop)\r\n            {\r\n                break;\r\n            }\r\n\r\n            \r\n            for(let i = 0; i < onceNum; i ++)\r\n            {\r\n                if(this.loadIndex >= this.total || this.isStop)\r\n                {\r\n                    break;\r\n                }\r\n                let assetPath = this.assetPathList[this.loadIndex];\r\n    \r\n                if(i < onceNum - 1)\r\n                {\r\n                    // console.log(\"Preload Load sync\", i, assetPath);\r\n                    AsyncUtil.Load3D(assetPath);\r\n                }\r\n                else\r\n                {\r\n                    // console.log(\"Preload Load async\", i, assetPath);\r\n                    await AsyncUtil.Load3DAsync(assetPath);\r\n                }\r\n                this.loadIndex ++;\r\n               \r\n            }\r\n\r\n            if(this.isStop)\r\n            {\r\n                break;\r\n            }\r\n\r\n\r\n          \r\n            if(this.isStop)\r\n            {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    \r\n\r\n}","import ZipManager from \"./ZipManager\";\r\nimport AsyncUtil from \"./AsyncUtil\";\r\nimport DebugResources from \"../DebugResources/DebugResources\";\r\nimport AssetManifest from \"./AssetManifest\";\r\nimport PreloadZipList from \"./PreloadZipList\";\r\nimport PreloadAssetList from \"./PreloadAssetList\";\r\nimport Handler = Laya.Handler;\r\n\r\nexport default class PrefabManager\r\n{\r\n    private static _Instance: PrefabManager;\r\n    static get Instance(): PrefabManager\r\n    {\r\n        if (!PrefabManager._Instance)\r\n        {\r\n            PrefabManager._Instance = new PrefabManager();\r\n            window['prefabManager'] = PrefabManager._Instance;\r\n        }\r\n        return PrefabManager._Instance;\r\n    }\r\n\r\n    srcRootPath:string;\r\n\r\n    Init(srcRootPath:string)\r\n    {\r\n        this.srcRootPath = srcRootPath;\r\n    }\r\n\r\n    \r\n    /** 资源ID转资源路径 */\r\n    ResFileNameToAssetPath(resId:string): string\r\n    {\r\n        return this.srcRootPath + resId + \".lh\";\r\n    }\r\n    \r\n\r\n    \r\n    /** 加载预设列表 */\r\n    public async LoadPrefabListAsync(resIdList:string[], callbacker:any, onProgerss?:((i, count, rate, path, res)=>any))\r\n    {\r\n        return new Promise<any>((resolve)=>\r\n        {\r\n            let i = 0;\r\n            let len = resIdList.length;\r\n            if(len == 0)\r\n            {\r\n                AsyncUtil.ResolveDelayCall(resolve);\r\n                return;\r\n            }\r\n\r\n            for(let resId of resIdList)\r\n            {\r\n                let assetPath = this.ResFileNameToAssetPath(resId);\r\n                DebugResources.onPrefabBegin(assetPath);\r\n                Laya.loader.create(assetPath, Laya.Handler.create(null, (res)=>\r\n                { \r\n                    i ++;\r\n                    \r\n                    DebugResources.onPrefabEnd(assetPath);\r\n                    if(onProgerss)\r\n                    {\r\n                        if(callbacker)\r\n                        {\r\n                            onProgerss.call(callbacker, i, len, Math.ceil(i / len * 100), assetPath, res);\r\n                        }\r\n                        else\r\n                        {\r\n                            onProgerss(i, len, Math.ceil(i / len * 100), assetPath, res);\r\n                        }\r\n                    }\r\n                    \r\n                    if(i >= len)\r\n                    {\r\n                        AsyncUtil.ResolveDelayCall(resolve);\r\n                    }\r\n\r\n                }));\r\n            }\r\n        });\r\n    }\r\n\r\n    preloadZip:PreloadZipList;\r\n    preloadAsset:PreloadAssetList;\r\n\r\n    public StopPreload()\r\n    {\r\n        if(this.preloadZip)\r\n        {\r\n            this.preloadZip.Stop();\r\n        }\r\n        \r\n        if(this.preloadAsset)\r\n        {\r\n            this.preloadAsset.Stop();\r\n        }\r\n\r\n        this.preloadZip = null;\r\n        this.preloadAsset = null;\r\n    }\r\n\r\n    \r\n    /** 隐藏默默加载 */\r\n    public LoadPrefabList2(resIdList:string[], isLoadPrefab: boolean = true, completeHandler?: Handler, progressHandler?: Handler)\r\n    {\r\n        this.StopPreload();\r\n\r\n        let i = 0;\r\n        let len = resIdList.length;\r\n        if(len == 0)\r\n        {\r\n            if(completeHandler) completeHandler.run();\r\n            return;\r\n        }\r\n\r\n        var manifest:AssetManifest = ZipManager.Instance.manifest;\r\n        let prefabAssetPathList:string[] = [];\r\n        let assetPathList:string[] = [];\r\n        var tmpMap:Map<string, any> = new Map<string, any>();\r\n        for(let resId of resIdList)\r\n        {\r\n            let assetPath = this.ResFileNameToAssetPath(resId);\r\n            let item  = Laya.Loader.getRes(assetPath);\r\n            if(item)\r\n            {\r\n                continue;\r\n            }\r\n\r\n            if(!manifest.HasAssetByPath(assetPath))\r\n            {\r\n                console.warn(\"Zip 文件清单中不存在资源\", assetPath);\r\n                continue;\r\n            }\r\n\r\n\r\n            let dependencieAssetPathList:string[] = manifest.GetAssetDependenciePathListByAssetPath(assetPath);\r\n            for(let dependencieAssetPath of dependencieAssetPathList)\r\n            {\r\n                if(tmpMap.has(dependencieAssetPath))\r\n                {\r\n                    continue;\r\n                }\r\n                \r\n                let item  = Laya.Loader.getRes(dependencieAssetPath);\r\n                if(item)\r\n                {\r\n                    continue;\r\n                }\r\n\r\n\r\n                assetPathList.push(dependencieAssetPath);\r\n                tmpMap.set(dependencieAssetPath, true);\r\n            }\r\n            // assetPathList.push(assetPath);\r\n            prefabAssetPathList.push(assetPath);\r\n        }\r\n        \r\n        let assetNameList:string[] = ZipManager.Instance.AssetPathListToAssetNameList(prefabAssetPathList);\r\n        let zipPathList = manifest.GetAssetListDependencieZipPathList(assetNameList);\r\n\r\n        this.preloadZip = new PreloadZipList(zipPathList, assetPathList);\r\n        this.preloadAsset = new PreloadAssetList(prefabAssetPathList);\r\n\r\n        this.preloadZip.Start(\r\n            Handler.create(this, ()=>{\r\n                if(isLoadPrefab)\r\n                {\r\n                    this.preloadAsset.LoadList(\r\n                        \r\n                        Handler.create(this, ()=>{\r\n                            if(progressHandler) progressHandler.recover();\r\n                            if(completeHandler) completeHandler.run();\r\n                        }),\r\n\r\n                        // 加载prefab进度\r\n                        Handler.create(this, (progress)=>{\r\n                            if(progressHandler) progressHandler.runWith(progress * 0.3 + 0.7);\r\n                        }, null, false)\r\n                    );\r\n                }\r\n                else\r\n                {\r\n                    if(progressHandler) progressHandler.recover();\r\n                    if(completeHandler) completeHandler.run();\r\n                }\r\n            }),\r\n            // 加载Zip进度\r\n            Handler.create(this, (progress)=>{\r\n                if(isLoadPrefab)\r\n                {\r\n                    if(progressHandler) progressHandler.runWith(progress * 0.7);\r\n                }\r\n                else\r\n                {\r\n                    if(progressHandler) progressHandler.runWith(progress);\r\n                }\r\n            }, null, false),\r\n        );\r\n\r\n        // await this.preloadZip.StartAsync();\r\n        // if(this.preloadAsset)\r\n        // {\r\n        //     await this.preloadAsset.StartAsync();\r\n        // }\r\n       \r\n    }\r\n\r\n    \r\n    /** 隐藏默默加载 */\r\n    public LoadPrefabList(pathList:string[], prefabAssetPathList: string[], isLoadPrefab: boolean = true, completeHandler?: Handler, progressHandler?: Handler)\r\n    {\r\n        this.StopPreload();\r\n\r\n        let i = 0;\r\n        let len = pathList.length;\r\n        if(len == 0)\r\n        {\r\n            if(completeHandler) completeHandler.run();\r\n            return;\r\n        }\r\n\r\n        var manifest:AssetManifest = ZipManager.Instance.manifest;\r\n        var assetPathList:string[] = [];\r\n        var tmpMap:Map<string, any> = new Map<string, any>();\r\n        \r\n        for(let assetPath of pathList)\r\n        {\r\n            tmpMap.set(assetPath, true);\r\n            assetPathList.push(assetPath);\r\n        }\r\n\r\n        for(let assetPath of pathList)\r\n        {\r\n            let item  = Laya.Loader.getRes(assetPath);\r\n            if(item)\r\n            {\r\n                continue;\r\n            }\r\n\r\n            if(!manifest.HasAssetByPath(assetPath))\r\n            {\r\n                console.warn(\"Zip 文件清单中不存在资源\", assetPath);\r\n                continue;\r\n            }\r\n\r\n\r\n            let dependencieAssetPathList:string[] = manifest.GetAssetDependenciePathListByAssetPath(assetPath);\r\n            if(!dependencieAssetPathList)\r\n            {\r\n                // console.log(\"Zip 没有依赖: \", assetPath);\r\n                continue;\r\n            }\r\n            for(let dependencieAssetPath of dependencieAssetPathList)\r\n            {\r\n                if(tmpMap.has(dependencieAssetPath))\r\n                {\r\n                    continue;\r\n                }\r\n                \r\n                let item  = Laya.Loader.getRes(dependencieAssetPath);\r\n                if(item)\r\n                {\r\n                    continue;\r\n                }\r\n\r\n\r\n                assetPathList.push(dependencieAssetPath);\r\n                tmpMap.set(dependencieAssetPath, true);\r\n            }\r\n        }\r\n        \r\n        let assetNameList:string[] = ZipManager.Instance.AssetPathListToAssetNameList(prefabAssetPathList);\r\n        let zipPathList = manifest.GetAssetListDependencieZipPathList(assetNameList);\r\n\r\n        this.preloadZip = new PreloadZipList(zipPathList, assetPathList);\r\n        this.preloadAsset = new PreloadAssetList(prefabAssetPathList);\r\n\r\n        this.preloadZip.Start(\r\n            Handler.create(this, ()=>{\r\n                if(isLoadPrefab)\r\n                {\r\n                    this.preloadAsset.LoadList(\r\n                        \r\n                        Handler.create(this, ()=>{\r\n                            if(progressHandler) progressHandler.recover();\r\n                            if(completeHandler) completeHandler.run();\r\n                        }),\r\n\r\n                        // 加载prefab进度\r\n                        Handler.create(this, (progress)=>{\r\n                            if(progressHandler) progressHandler.runWith(progress * 0.3 + 0.7);\r\n                        }, null, false)\r\n                    );\r\n                }\r\n                else\r\n                {\r\n                    if(progressHandler) progressHandler.recover();\r\n                    if(completeHandler) completeHandler.run();\r\n                }\r\n            }),\r\n            // 加载Zip进度\r\n            Handler.create(this, (progress)=>{\r\n                if(isLoadPrefab)\r\n                {\r\n                    if(progressHandler) progressHandler.runWith(progress * 0.7);\r\n                }\r\n                else\r\n                {\r\n                    if(progressHandler) progressHandler.runWith(progress);\r\n                }\r\n            }, null, false),\r\n        );\r\n\r\n        // await this.preloadZip.StartAsync();\r\n        // if(this.preloadAsset)\r\n        // {\r\n        //     await this.preloadAsset.StartAsync();\r\n        // }\r\n       \r\n    }\r\n\r\n}\r\n\r\nwindow['PrefabManager'] = PrefabManager;","\r\nimport AssetManifest from \"./Zip/AssetManifest\";\r\nimport ZipManager from \"./Zip/ZipManager\";\r\nimport PrefabManager from \"./Zip/PrefablManager\";\r\nimport DebugResources from \"./DebugResources/DebugResources\";\r\nimport AsyncUtil from \"./Zip/AsyncUtil\";\r\nimport JsZipAsync from \"./Zip/JsZipAsync\";\r\nimport LayaExtends_Loader from \"./Zip/LayaExtends/LayaExtends_Loader\";\r\n\r\nwindow['AssetManifest'] = AssetManifest;\r\nwindow['AsyncUtil'] = AsyncUtil;\r\nwindow['JsZipAsync'] = JsZipAsync;\r\nwindow['ZipLoader'] = LayaExtends_Loader;\r\nwindow['ZipManager'] = ZipManager;\r\nwindow['PrefabManager'] = PrefabManager;\r\nwindow['DebugResources'] = DebugResources;\r\n\r\n"],"names":["Handler"],"mappings":"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"}